(this.webpackJsonpsurvey=this.webpackJsonpsurvey||[]).push([[0],{113:function(e,t,n){},114:function(e,t,n){},115:function(e,t,n){},116:function(e,t,n){},124:function(e,t,n){},125:function(e,t,n){},126:function(e,t,n){},128:function(e,t,n){},129:function(e,t,n){},130:function(e,t,n){},142:function(e,t,n){"use strict";n.r(t);n(59),n(60);var r=n(25),c=n.n(r),i=n(11),a=n(1),s=n.n(a),o=n(10),u=n(3),l=n(13),d=(n(65),n(39)),j=n(8);n(66);function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}function h(e,t){var n=e.title,r=e.titleId,c=f(e,["title","titleId"]);return a.createElement("svg",b({xmlns:"http://www.w3.org/2000/svg",width:105,height:80,viewBox:"0 0 105.4 80.3",ref:t,"aria-labelledby":r},c),n?a.createElement("title",{id:r},n):null,a.createElement("path",{d:"M5.2 4.6 52.7 77 100.2 4.6 52.7 28.4Z",style:{fill:"#662485",strokeWidth:4,stroke:"#662485"}}))}var p,O=a.forwardRef(h),m=(n.p,n(0)),x=function(e){var t=e.revealNext,n=e.handleClicked;return t?Object(m.jsxs)("button",{className:"next-button",onClick:n,children:[Object(m.jsx)("div",{children:"Next"}),Object(m.jsx)(O,{className:"arrow"})]}):""};function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function g(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}function y(e,t){var n=e.title,r=e.titleId,c=g(e,["title","titleId"]);return a.createElement("svg",v({xmlns:"http://www.w3.org/2000/svg",width:41.143,height:41.143,viewBox:"0 0 10.886 10.886",ref:t,"aria-labelledby":r},c),n?a.createElement("title",{id:r},n):null,p||(p=a.createElement("circle",{cx:38.947,cy:8.167,r:4.914,opacity:.96,fill:"#fff",fillRule:"evenodd",stroke:"#fff",strokeWidth:1.058,transform:"translate(-33.504 -2.724)"})))}var w,k=a.forwardRef(y);n.p;function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function N(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}function C(e,t){var n=e.title,r=e.titleId,c=N(e,["title","titleId"]);return a.createElement("svg",S({width:41.143,height:41.143,viewBox:"0 0 10.886 10.886",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},c),n?a.createElement("title",{id:r},n):null,w||(w=a.createElement("circle",{cx:5.443,cy:5.443,r:5.1529,fill:"none",opacity:.96,stroke:"#fff",strokeWidth:.50001})))}var q=a.forwardRef(C),A=(n.p,function(e){var t=e.responses,n=e.handleResponded,r=Object(a.useState)(-1),c=Object(u.a)(r,2),i=c[0],s=c[1];return Object(a.useEffect)((function(){n(i>-1?i:null)}),[n,i]),Object(m.jsx)("div",{className:"question-mc option-box",children:t.map((function(e,t){return Object(m.jsxs)("div",{className:"option",onClick:function(){return s(t)},children:[Object(m.jsx)("div",{className:"response",children:e}),(n=i,r=t,n===r?Object(m.jsx)(k,{className:"indicator"}):Object(m.jsx)(q,{className:"indicator"}))]},t);var n,r}))})});function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}function D(e,t){var n=e.title,r=e.titleId,c=_(e,["title","titleId"]);return a.createElement("svg",E({xmlns:"http://www.w3.org/2000/svg",width:53,height:53,viewBox:"0 0 52.9 52.9",ref:t,"aria-labelledby":r},c),n?a.createElement("title",{id:r},n):null,a.createElement("rect",{width:52.9,height:52.9,style:{fill:"#fff",strokeWidth:4}}))}var I=a.forwardRef(D);n.p;function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function R(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}function F(e,t){var n=e.title,r=e.titleId,c=R(e,["title","titleId"]);return a.createElement("svg",P({xmlns:"http://www.w3.org/2000/svg",width:53,height:53,viewBox:"0 0 52.9 52.9",ref:t,"aria-labelledby":r},c),n?a.createElement("title",{id:r},n):null,a.createElement("rect",{width:52.9,height:52.9,style:{fill:"none",strokeWidth:4,stroke:"#fff"}}))}var T=a.forwardRef(F),Q=(n.p,function(e,t){return!0===e[t]?Object(m.jsx)(I,{className:"indicator"}):Object(m.jsx)(T,{className:"indicator"})}),L=function(e){var t=e.responses,n=e.handleResponded;t=[].concat(Object(l.a)(t),["None of the above"]);for(var r=[],c=0;c<t.length;c++)r[c]=!1;var i=Object(a.useState)(r),s=Object(u.a)(i,2),o=s[0],d=s[1];return Object(a.useEffect)((function(){o.find((function(e){return!0===e}))?n(o):n(null)}),[o,n]),Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Select all that apply."}),Object(m.jsx)("div",{className:"question-ms option-box",children:t.map((function(e,t){return Object(m.jsxs)("div",{className:"option",onClick:function(){d(function(e,t){if(console.log(e),t===e.length-1)for(var n=0;n<t;n++)e[n]=!1;return e[e.length-1]&&t!==e.length-1&&(e[e.length-1]=!1),e[t]=!e[t],e}(Object(l.a)(o),t))},children:[Object(m.jsx)("div",{className:"response",children:e}),Q(o,t)]},t)}))})]})},W=(n(68),n(22)),M=n.n(W);function B(){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))}function H(){window.addEventListener("resize",B)}function K(){window.removeEventListener("resize",B)}function U(){H()}var z=M.a.object({textfield:M.a.string().min(2).max(350).required().label("Answer")});var V=function(e){var t=e.handleResponded,n=Object(a.useState)(null),r=Object(u.a)(n,2),c=r[0],i=r[1],s=Object(a.useState)(""),o=Object(u.a)(s,2),l=o[0],d=o[1];return Object(a.useEffect)((function(){t(c)}),[t,c]),Object(m.jsxs)("div",{className:"question-fr",children:[Object(m.jsx)("textarea",{maxLength:"350",rows:"6",placeholder:"Write your answer here",onTouchEnd:K,onMouseLeave:U,onChange:function(e){return function(e,t,n){var r=e.target.value,c=z.validate({textfield:r}).error;c?(t(null),n(c.message)):(t(r),n(""))}(e,i,d)}}),Object(m.jsx)("div",{className:"error",children:l})]})},Y=(n(89),n(90),function(e){var t=e.text,n=e.onClick;return Object(m.jsx)("button",{className:"user-button",onClick:n,children:t})});function G(e,t){return Object(m.jsx)(A,{responses:["Yes","No"],handleResponded:function(n){!function(e,t,n){0===e?(t(!0),n(!1)):1===e&&(n(!0),t(!1))}(n,e,t)}})}var J=function(e){e.responses;var t=e.handleResponded,n=Object(a.useState)(!1),r=Object(u.a)(n,2),c=r[0],i=r[1],s=Object(a.useState)(!1),o=Object(u.a)(s,2),l=o[0],d=o[1],j=Object(a.useState)("#000000"),b=Object(u.a)(j,2),f=b[0],h=b[1],p=[i,d];return Object(a.useEffect)((function(){var e="No Color";c&&(e=f),t(c||l?e:null)})),l||!c&!l?G.apply(void 0,p):Object(m.jsxs)("div",{className:"question-color",children:[Object(m.jsx)("p",{children:"Select the color: "}),Object(m.jsx)("input",{type:"color",onChange:function(e){return h(e.target.value)}}),Object(m.jsx)(Y,{text:"Go Back",onClick:function(){i(!1)}})]})},Z=function(e){var t=e.handleResponded;return Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"1: Strongly Disagree | 2: Disagree | 3: Neutral | 4: Agree | 5: Strongly Agree"}),Object(m.jsxs)("div",{style:{display:"flex",flexDirection:"column",maxWidth:"15rem",margin:"0 auto"},children:[Object(m.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[1,2,3,4,5].map((function(e){return Object(m.jsx)("p",{style:{fontWeight:"bold"},children:e},e)}))}),Object(m.jsx)("input",{type:"range",max:"5",min:"1",step:"1",defaultValue:"3",onChange:function(e){console.log(e.target.value),t(e.target.value)}})]})]})};function $(e,t,n){var r={responses:t,handleResponded:n};return"multiple-choice"===e?Object(m.jsx)(A,Object(j.a)({},r)):"check-box"===e?Object(m.jsx)(L,Object(j.a)({},r)):"short-answer"===e?Object(m.jsx)(V,Object(j.a)({},r)):"color"===e?Object(m.jsx)(J,Object(j.a)({},r)):"slider"===e?Object(m.jsx)(Z,Object(j.a)({},r)):void 0}var X,ee=function(e){var t=e.question,n=e.handleResponse,r=t.type,c=t.responses,i=t.ask,s=Object(a.useState)(null),o=Object(u.a)(s,2),l=o[0],d=o[1],j=Object(a.useState)(!1),b=Object(u.a)(j,2),f=b[0],h=b[1];return Object(m.jsxs)("div",{className:"question",children:[Object(m.jsx)("h1",{children:i}),$(r,c,(function(e){console.log(e),d(e)})),Object(m.jsx)("div",{className:"next",children:Object(m.jsx)(x,{revealNext:null!==l&!f,handleClicked:function(){console.log(l),function(e,t,n){t(e),n(!0)}(l,n,h)}})})]})},te=function(e){var t=e.questions,n=e.currentQuestion,r=e.handleResponse;return Object(d.b)(t[n],(function(e){return e.ask}),{from:{transform:0===n?"translate3d(0, 0%, 0)":"translate3d(0, 100%, 0)"},enter:{transform:"translate3d(0, 0, 0)"},leave:{transform:n===t.length-1?"translate3d(0, 0, 0)":"translate3d(0, -100%, 0)"}}).map((function(e){var t=e.item,n=e.props,c=e.key;return Object(m.jsx)(d.a.div,{className:"question-animator",style:n,children:Object(m.jsx)(ee,{question:t,handleResponse:r})},c)}))},ne=(n(91),n(92),function(e,t){for(var n=[],r=0;r<e;r++)r<t?n.push(Object(m.jsx)(k,{className:"circle"},r)):n.push(Object(m.jsx)(q,{className:"circle"},r));return n}),re=function(e){var t=e.numQuestions,n=e.currentQuestion;return Object(m.jsx)("div",{className:"fixed-UI",children:Object(m.jsx)("div",{className:"circles",children:ne(t,n)})})},ce=n(5),ie=n.n(ce),ae=n(6),se=(n(93),n(31));function oe(){return(oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ue(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}function le(e,t){var n=e.title,r=e.titleId,c=ue(e,["title","titleId"]);return a.createElement("svg",oe({width:"27.059mm",height:"26.944mm",viewBox:"0 0 27.059 26.944",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},c),n?a.createElement("title",{id:r},n):null,X||(X=a.createElement("g",{transform:"translate(-89.884 -78.943)"},a.createElement("path",{transform:"matrix(1.1129 0 0 .99792 -10.183 .19219)",d:"m113.73 92.415c0 1.2974-21.347 13.622-22.471 12.974-1.1235-0.64868-1.1235-25.298 0-25.947 1.1235-0.64868 22.471 11.676 22.471 12.974z",fill:"#fff",fillRule:"evenodd",opacity:.96,stroke:"#dcdcdc"}))))}var de,je,be=a.forwardRef(le);n.p;function fe(){return(fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function he(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}function pe(e,t){var n=e.title,r=e.titleId,c=he(e,["title","titleId"]);return a.createElement("svg",fe({width:"27.059mm",height:"26.944mm",viewBox:"0 0 27.059 26.944",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},c),n?a.createElement("title",{id:r},n):null,de||(de=a.createElement("rect",{x:16.527,y:.74865,width:7.4985,height:25.447,rx:.17777,ry:.22071,fill:"#fff",fillRule:"evenodd",opacity:.96,stroke:"#dcdcdc",strokeWidth:1.4973})),je||(je=a.createElement("rect",{x:3.0334,y:.74865,width:7.4985,height:25.447,rx:.17777,ry:.22071,fill:"#fff",fillRule:"evenodd",opacity:.96,stroke:"#dcdcdc",strokeWidth:1.4973})))}var Oe=a.forwardRef(pe),me=(n.p,function(e){switch(e.playState){case"paused":return Object(m.jsx)(be,{className:"player play-button"});case"playing":return Object(m.jsx)(Oe,{className:"player pause-buton"});default:return"Error"}}),xe=function(e){var t=e.canContinue,n=e.handleContinueClicked;return t&&Object(m.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginTop:"1rem"},children:[Object(m.jsx)("button",{className:"music-continue",onClick:n,children:"Continue to questions"}),Object(m.jsx)("p",{children:"Note: Continuing will end the music."})]})},ve=function(e,t,n){switch(e){case"paused":return n.play(),void t("playing");case"playing":return n.pause(),void t("paused");default:return}},ge=(n(94),function(e){var t=Object(a.useState)(0),n=Object(u.a)(t,2),r=n[0],c=n[1],i=Object(a.useRef)(null),s=e.size,o=e.progress,l=e.strokeWidth,d=s/2,j=s/2-l/2,b=2*Math.PI*j;return Object(a.useEffect)((function(){c((100-o)/100*b),i.current.style="transition: stroke-dashoffset 300ms linear"}),[c,o,b,r]),Object(m.jsx)("div",{className:"progress-bar",children:Object(m.jsxs)("svg",{className:"svg",width:s,height:s,children:[Object(m.jsx)("circle",{className:"svg-circle-bg",cx:d,cy:d,r:j,strokeWidth:l}),Object(m.jsx)("circle",{className:"svg-circle",ref:i,cx:d,cy:d,r:j,strokeWidth:l,strokeDasharray:b,strokeDashoffset:r})]})})}),ye=n(18),we=n.n(ye);we.a.defaults.headers.common.authorization=localStorage.getItem("token");var ke=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_PORT:"31313"}),Se=ke.REACT_APP_LOCALHOST,Ne=ke.REACT_APP_API_PORT,Ce=Se?"http://localhost:".concat(Ne):"https://sonicremedies.net:".concat(Ne),qe=function(e){console.error(e.message)},Ae={getAll:function(e){return we.a.get(Ce+"/"+e).then((function(e){return e.data})).catch(qe)},getOne:function(e,t){return we.a.get(Ce+"/"+e+"/"+t).then((function(e){return e.data})).catch(qe)},getOneFile:function(e,t){return we()({method:"GET",url:Ce+"/"+e+"/"+t,responseType:"blob"}).then((function(e){return e.data})).catch(qe)},post:function(e,t){return we.a.post(Ce+"/"+e,t).then((function(e){return e.data})).catch(qe)},postForm:function(e,t){return we()({method:"post",url:Ce+"/"+e,data:t,headers:{"Content-Type":"multipart/form-data"}})},deleteOne:function(e,t){return we.a.delete(Ce+"/"+e+"/"+t).then((function(e){return e.data})).catch(qe)},patch:function(e,t){return we.a.patch(Ce+"/"+e,t).then((function(e){return e.data})).catch(qe)},patchOne:function(e,t,n){return we.a.patch(Ce+"/"+e+"/"+t,n).then((function(e){return e.data})).catch(qe)},putOne:function(e,t,n){return we.a.put(Ce+"/"+e+"/"+t,n).then((function(e){return e.data})).catch(qe)}},Ee=function(){var e=Object(ae.a)(ie.a.mark((function e(t,n){var r,c;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae.getOneFile("music/files",t);case 2:r=e.sent,(c=new se.Howl({src:[URL.createObjectURL(r)],html5:!0,format:"mp3"})).on("loaderror",(function(){throw Error("Howler error loading downloaded file")})),n(c);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),_e=function(e){var t=e.filename,n=e.handleMusicDone,r=Object(a.useState)("paused"),c=Object(u.a)(r,2),i=c[0],s=c[1],o=Object(a.useState)(!1),l=Object(u.a)(o,2),d=l[0],j=l[1],b=Object(a.useState)(null),f=Object(u.a)(b,2),h=f[0],p=f[1],O=Object(a.useState)(0),x=Object(u.a)(O,2),v=x[0],g=x[1],y=Object(a.useCallback)((function(){h.seek()>h.duration()/2&&(clearInterval(y),j(!0))}),[h]),w=Object(a.useCallback)((function(){g(h.seek()/h.duration()*100)}),[h]);return Object(a.useEffect)((function(){!h&&t&&Ee(t+".mp3",p)}),[h,t]),Object(a.useEffect)((function(){if(h){var e=setInterval(y,1e3),t=setInterval(w,300);return h.on("end",(function(){h.seek(0),s("paused")})),function(){clearInterval(e),clearInterval(t),h.unload()}}}),[y,w,h]),h?Object(m.jsxs)(a.Fragment,{children:[Object(m.jsxs)("div",{className:"music-player",onClick:function(){return ve(i,s,h)},children:[Object(m.jsx)(ge,{size:180,progress:v,strokeWidth:6}),Object(m.jsx)(me,{playState:i})]}),Object(m.jsx)(xe,{canContinue:d,handleContinueClicked:function(){h.pause(),n()}})]}):Object(m.jsx)("h1",{children:"Loading audio..."})},De=(n(113),function(e){var t=e.setId,n=e.totalSets,r=e.clickContinue;return Object(m.jsxs)("div",{className:"orientation-page global-container",children:[Object(m.jsxs)("h1",{children:["Question set ",t+1," / ",n]}),Object(m.jsx)(Y,{text:"Continue",onClick:r})]})}),Ie=(n(114),function(){return Object(m.jsx)("div",{className:"global-container complete-page",children:Object(m.jsx)("h1",{children:"You have completed the survey. Thank you!"})})}),Pe=function(e){var t=e.musicFilename,n=e.setId,r=e.set,c=e.setCurrentSet,i=e.totalSets,s=e.postResponse,o=r.questions,d=Object(a.useState)(0),j=Object(u.a)(d,2),b=j[0],f=j[1],h=Object(a.useState)("orientation"),p=Object(u.a)(h,2),O=p[0],x=p[1],v=Object(a.useState)([]),g=Object(u.a)(v,2),y=g[0],w=g[1];switch(O){case"orientation":return Object(m.jsx)(De,{setId:n,totalSets:i,clickContinue:function(){r.music?x("music"):x("questions")}});case"music":return Object(m.jsx)("div",{className:"music-page global-container",children:Object(m.jsx)(_e,{filename:t,handleMusicDone:function(){x("questions")}})});case"questions":return Object(m.jsxs)("div",{className:"set global-container",children:[Object(m.jsx)("div",{className:"set-questions",children:Object(m.jsx)(te,{questions:o,currentQuestion:b,handleResponse:function(e){var t=[].concat(Object(l.a)(y),[e]);w(t),b===o.length-1?n!==i-1?(f(0),c(n+1),x("orientation")):(x("complete"),s(t)):f(b+1)}})}),Object(m.jsx)(re,{numQuestions:o.length,currentQuestion:b})]});case"complete":return Object(m.jsx)(Ie,{});default:return null}},Re=function(e,t){var n=[];return e.forEach((function(e){var r=[];e.questions.forEach((function(e){var n=t[e];r.push({ask:n.title,responses:n.options,type:n.input_type,id:n._id})})),n.push({questions:r,music:e.music})})),{sets:n}},Fe=function(){var e=Object(ae.a)(ie.a.mark((function e(){var t,n;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae.getAll("sets");case 2:return t=e.sent,e.next=5,Ae.getAll("questions/idict");case 5:return n=e.sent,e.abrupt("return",Re(t,n));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Te=n(57),Qe=function(){var e=Object(ae.a)(ie.a.mark((function e(t){var n,r,c,i,a;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.filter((function(e){return e.music})).length,e.next=3,Ae.getAll("music");case 3:return r=e.sent,c=Te.a.sample(r,n),i=-1,a=[],t.map((function(e){return e.music?a.push(c[i+=1]._id):a.push(null)})),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Le=function(){var e=Object(a.useState)(0),t=Object(u.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(null),i=Object(u.a)(c,2),s=i[0],o=i[1],l=Object(a.useState)([]),d=Object(u.a)(l,2),j=d[0],b=d[1];Object(a.useEffect)((function(){Fe().then((function(e){return o(e),e.sets})).then((function(e){return Qe(e)})).then((function(e){b(e)}))}),[]);if(null!==s&&void 0!==s){var f=s.sets;return Object(m.jsx)(Pe,{musicFilename:j[n],setId:n,set:f[n],nextSet:f[n+1],setCurrentSet:r,totalSets:f.length,postResponse:function(e){for(var t=[],n=[],r=[],c=[],i=0;i<s.sets.length;i++){var a=s.sets[i];r.push(a.questions.length);for(var o=0;o<a.questions.length;o++)t.push(a.questions[o].id),n.push(a.questions[o].type)}for(var u=0;u<e.length;u++)if("multiple-choice"===n[u]||"color"===n[u]||"slider"===n[u])c.push(e[u].toString());else if("short-answer"===n[u])c.push(e[u]);else if("check-box"===n[u]){for(var l="",d=0;d<e[u].length;d++)e[u][d]?l+="1":l+="0";c.push(l)}var b={musicids:j,questionGroups:r,questions:t,answers:c};Ae.post("responses",b)}})}return null},We=n(16),Me=n(21),Be=n(20),He=n(19),Ke=(n(115),n(116),function(e){Object(Be.a)(n,e);var t=Object(He.a)(n);function n(){var e;Object(We.a)(this,n);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={},e}return Object(Me.a)(n,[{key:"render",value:function(){return Object(m.jsxs)("div",{className:"home global-container",children:[Object(m.jsx)("h1",{children:"Welcome to Sonic Remedies!"}),Object(m.jsx)("p",{children:"The purpose of this site is to support research which investigates the relationship our minds and bodies have with music."}),Object(m.jsx)("p",{children:"In particular, the Sonic Remedies team seeks to identify specific elements of musical construction and expression for the purpose of prescribing remedies for healing."}),Object(m.jsxs)("p",{children:["Your participation here is entirely voluntary and without compensation. Your responses are anonymous and utilized strictly to support research. You won\u2019t be asked to pay for anything or offered products and services for sale."," "]}),Object(m.jsx)("p",{children:"For this survey, you will be asked a series of questions and presented with approximately five short musical excerpts, for which you will need to share both mental and physical responses. The survey will take approximately 15 minutes. We appreciate your involvement in this study and hope you enjoy the journey."}),Object(m.jsx)(i.b,{to:"/survey",children:Object(m.jsx)(Y,{text:"Begin"})})]})}}]),n}(a.Component)),Ue=function(){return Object(m.jsx)("h1",{className:"global-h1",children:"Page Not Found."})},ze=n(58),Ve=function(){var e=Object(ae.a)(ie.a.mark((function e(t,n){var r;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae.post("login",t);case 2:(r=e.sent)?(localStorage.setItem("token",r),n(!0)):n(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ye=function(e){var t=e.setLoggedIn,n=Object(a.useState)({username:"admin",password:""}),r=Object(u.a)(n,2),c=r[0],i=r[1];return Object(m.jsxs)("div",{className:"admin-container",children:[Object(m.jsx)("h1",{children:"Please login as admin to continue"}),Object(m.jsxs)("form",{children:[Object(m.jsx)("label",{children:"Username"}),Object(m.jsx)("input",{defaultValue:"admin",onChange:function(e){return i({username:e.target.value,password:c.password})}}),Object(m.jsx)("label",{children:"Password"}),Object(m.jsx)("input",{type:"password",onChange:function(e){return i({username:c.username,password:e.target.value})}}),Object(m.jsx)("button",{onClick:function(e){e.preventDefault(),Ve(c,t)},children:"Login"})]})]})},Ge=function(){var e=Object(ae.a)(ie.a.mark((function e(t,n,r){var c;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae.getAll("login/me",t);case 2:c=e.sent,r(c);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Je=function(e){var t=e.component,n=Object(ze.a)(e,["component"]),r=Object(a.useState)(""),c=Object(u.a)(r,2),i=c[0],s=c[1],l=Object(a.useState)(!1),d=Object(u.a)(l,2),b=d[0],f=d[1];return Object(a.useEffect)((function(){Ge(localStorage.getItem("token"),f,s),"admin"===i&&f(!0)}),[i]),Object(m.jsxs)("div",{children:[!b&&Object(m.jsx)("div",{children:Object(m.jsx)(Ye,{setLoggedIn:f})}),Object(m.jsx)(o.b,Object(j.a)(Object(j.a)({},n),{},{render:function(e){if(!0===b)return Object(m.jsx)(t,Object(j.a)({},e))}}))]})},Ze=(n(124),M.a.object({filename:M.a.string().pattern(/.+.(mp3)$/),textfield:M.a.string().max(30),number:M.a.number().max(1e3).min(1)})),$e=function(e,t,n,r,c,i){var a=Object(l.a)(e),s=t.target.value,o=("number"===i?Ze.validate({number:s}):Ze.validate({textfield:s})).error;if(!o){a[c]="",n(a);var u=!0;a.forEach((function(e){(e||void 0===e)&&(u=!1)})),r(u)}o&&(a[c]=t.target.name+" "+o.message.split('"')[2],n(a),r(!1))},Xe=[{name:"title",readable:"Title",example:"Stupid Love"},{name:"artist",readable:"Artist",example:"Lady Gaga"},{name:"album",readable:"Album",example:"Chromatica"},{name:"genre",readable:"Genre",example:"Pop"},{name:"tempo",readable:"Tempo (bpm)",example:"118",type:"number"}],et=function(e){var t=e.validator,n=e.setFieldsFilled,r=e.sendFields,c=[];Xe.forEach((function(){return c.push(void 0)}));var i=Object(a.useState)(c),s=Object(u.a)(i,2),o=s[0],l=s[1],d=Object(a.useState)({}),b=Object(u.a)(d,2),f=b[0],h=b[1];return Object(m.jsx)("div",{children:Xe.map((function(e,c){return Object(m.jsxs)("div",{className:"field-container",children:[Object(m.jsxs)("div",{className:"fc-main",children:[Object(m.jsx)("label",{htmlFor:e.name,children:e.readable}),Object(m.jsx)("input",{required:!0,type:"text",name:e.name,placeholder:"Ex. "+e.example,onChange:function(i){t(o,i,l,n,c,e.type);var a=Object(j.a)({},f);a[e.name]=i.target.value.toLowerCase(),h(a),r(a)}})]}),Object(m.jsx)("p",{className:"fc-err",children:o[c]})]},e.name)}))})},tt="Consistent Vibe",nt=function(e){var t=e.setField;return Object(m.jsx)("div",{className:"field-container",children:Object(m.jsxs)("div",{className:"fc-main",children:[Object(m.jsx)("label",{htmlFor:tt,children:tt}),Object(m.jsxs)("div",{style:{minWidth:"55%",display:"flex",justifyContent:"flex-end"},children:[Object(m.jsxs)("div",{className:"yes-no-option",children:[Object(m.jsx)("label",{htmlFor:"yes",children:"Yes"}),Object(m.jsx)("input",{type:"radio",id:"yes",name:tt,value:!0,onChange:function(e){return t(e.target.value)}})]}),Object(m.jsxs)("div",{className:"yes-no-option",children:[Object(m.jsx)("label",{htmlFor:"no",children:"No"}),Object(m.jsx)("input",{type:"radio",id:"no",name:tt,value:!1,defaultChecked:!0,onChange:function(e){return t(!e.target.value)}})]})]})]})},tt)},rt=function(e){var t=e.setField,n="Improvisation";return Object(m.jsx)("div",{className:"field-container",children:Object(m.jsxs)("div",{className:"fc-main",children:[Object(m.jsx)("label",{htmlFor:n,children:n}),Object(m.jsxs)("div",{style:{display:"flex",flexDirection:"column",minWidth:"55%"},children:[Object(m.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:["0%","25%","50%","75%","100%"].map((function(e){return Object(m.jsx)("div",{style:{fontSize:"10px"},children:e},e)}))}),Object(m.jsx)("input",{id:n,name:n,type:"range",min:"0",max:"100",step:"25",defaultValue:"0",onChange:function(e){return t(e.target.value)}})]})]})},n)},ct=["A","B","C","D","E","F","G","N/A"],it=["Major","Minor","Dorian","Phrygian","Lydian","Mixolydian","Locrian","N/A"],at=function(e,t,n,r){return"N/A"===e?"N/A":e+(t?"f":n?"s":"")+("N/A"!==r?r:"")},st=function(e){var t=e.setPrevailingKey,n=Object(a.useState)(!1),r=Object(u.a)(n,2),c=r[0],i=r[1],s=Object(a.useState)(!1),o=Object(u.a)(s,2),l=o[0],d=o[1],j=Object(a.useState)(!1),b=Object(u.a)(j,2),f=b[0],h=b[1],p=Object(a.useState)("N/A"),O=Object(u.a)(p,2),x=O[0],v=O[1],g=Object(a.useState)("Major"),y=Object(u.a)(g,2),w=y[0],k=y[1];return Object(m.jsx)("div",{className:"field-container",children:Object(m.jsxs)("div",{className:"fc-main",children:[Object(m.jsx)("label",{htmlFor:"Prevailing Key",children:"Prevailing Key"}),Object(m.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-end",alignItems:"",minWidth:"55%"},children:[Object(m.jsx)("select",{defaultValue:"N/A",name:"Prevailing Key",onChange:function(e){"N/A"===e.target.value?(i(!1),d(!1),h(!1),k("Major")):i(!0),v(e.target.value),t(at(e.target.value,l,f,w))},children:ct.map((function(e){return Object(m.jsx)("option",{value:e,children:e},e)}))}),c?Object(m.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"end",marginTop:"0.5rem"},children:[Object(m.jsxs)("div",{style:{marginRight:"0.5rem"},children:[Object(m.jsx)("label",{htmlFor:"\u266f",children:"\u266f"}),Object(m.jsx)("input",{style:{width:"1rem"},type:"checkbox",name:"\u266f",disabled:l,onChange:function(){t(at(x,l,!f,w)),h(!f)}})]}),Object(m.jsxs)("div",{style:{marginRight:"0.5rem"},children:[Object(m.jsx)("label",{htmlFor:"\u266d",children:"\u266d"}),Object(m.jsx)("input",{style:{width:"1rem"},type:"checkbox",name:"\u266d",disabled:f,onClick:function(){t(at(x,!l,f,w)),d(!l)}})]}),Object(m.jsx)("select",{name:"Key Quality",onChange:function(e){k(e.target.value),t(at(x,l,f,e.target.value))},defaultValue:"Major",children:it.map((function(e){return Object(m.jsx)("option",{value:e,children:e},e)}))})]}):null]})]})})},ot=function(){var e=Object(ae.a)(ie.a.mark((function e(t,n){var r,c;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ae.post("music",t);case 3:(r=e.sent)?r.error?alert(r.error):((c=new FormData).append("filename",r._id),c.append("file",n),Ae.postForm("music/files",c),alert("Success!")):alert("Failure. You may need to login again."),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),ut=function(e,t,n,r,c){if(e.target.files[0]&&"audio/mpeg"===e.target.files[0].type){var i=e.target.files[0],a=window.URL.createObjectURL(i),s=new se.Howl({src:[a],format:"mp3"});s.on("loaderror",(function(){t(null),n("File could not be loaded. May be corrupted mp3 file."),r(!1)})),s.on("load",(function(){t(Math.trunc(s.duration())),n(""),c(i),r(!0)}))}else n("Invalid File or No File Selected"),r(!1)},lt=function(){var e=Object(a.useState)(!1),t=Object(u.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!1),i=Object(u.a)(c,2),s=i[0],o=i[1],l=Object(a.useState)(""),d=Object(u.a)(l,2),b=d[0],f=d[1],h=Object(a.useState)(null),p=Object(u.a)(h,2),O=p[0],x=p[1],v=Object(a.useState)({prevailingKey:"N/A",improvisation:0,consistent_vibe:!1}),g=Object(u.a)(v,2),y=g[0],w=g[1],k=function(e){for(var t=Object(j.a)({},y),n=0,r=Object.entries(e);n<r.length;n++){var c=Object(u.a)(r[n],2),i=c[0],a=c[1];t[i]=a}w(t)};return Object(m.jsxs)("form",{children:[Object(m.jsx)("input",{required:!0,type:"file",onInput:function(e){ut(e,(function(e){return k({duration:e})}),f,r,x)},accept:"audio/mp3"}),Object(m.jsx)("p",{className:"err",children:b}),Object(m.jsx)(et,{validator:$e,setFieldsFilled:o,sendFields:function(e){return k(e)}}),Object(m.jsx)(st,{setPrevailingKey:function(e){return k({prevailingKey:e})}}),Object(m.jsx)(rt,{setField:function(e){return k({improvisation:e})}}),Object(m.jsx)(nt,{setField:function(e){return k({consistent_vibe:e})}}),Object(m.jsx)("button",{onClick:function(e){e.preventDefault(),window.confirm("Are you sure you want to submit this?")&&ot(y,O)},style:n&&s?{}:{display:"none"},children:"Submit"})]})},dt=function(){return Object(m.jsxs)("div",{className:"admin-container upload-music",children:[Object(m.jsx)(i.b,{to:"/admin",children:Object(m.jsx)("button",{children:"Return to Admin Home"})}),Object(m.jsx)("h1",{children:"Upload a music file (.mp3)"}),Object(m.jsx)(lt,{})]})},jt=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1],c=function(){var e=Object(ae.a)(ie.a.mark((function e(){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=r,e.next=3,Ae.getAll("music");case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){c()})),Object(m.jsxs)("div",{className:"admin-container",children:[Object(m.jsx)(i.b,{to:"/admin",children:Object(m.jsx)("button",{children:"Return to Admin Home"})}),n.map((function(e){return Object(m.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},children:[Object(m.jsx)("div",{style:{margin:"1rem"},children:e.title}),Object(m.jsx)("div",{style:{margin:"1rem"},children:e.artist}),Object(m.jsx)("button",{style:{margin:"1rem"},onClick:function(){return t=e._id,void Ae.deleteOne("music",t);var t},children:"Delete"})]},e._id)}))]})},bt=(n(125),function(e){var t=e.question,n=e.deleteQuestion;switch(t.input_type){default:return Object(m.jsx)("h3",{children:"Error: invalid input type"});case"multiple-choice":case"check-box":return Object(m.jsxs)("div",{children:[Object(m.jsx)("h3",{children:t.title}),Object(m.jsx)("h5",{children:t.input_type}),Object(m.jsx)("ul",{children:t.options.map((function(e){return Object(m.jsx)("li",{children:e},e)}))}),Object(m.jsx)("button",{className:"small-btn",onClick:function(){return n(t._id)},children:"Remove From Set"})]});case"short-answer":case"color":case"slider":return Object(m.jsxs)("div",{children:[Object(m.jsx)("h3",{children:t.title}),Object(m.jsx)("h5",{children:t.input_type}),Object(m.jsx)("button",{className:"small-btn",onClick:function(){return n(t._id)},children:"Remove From Set"})]})}}),ft=function(e){var t=e.question,n=e.addToSelected,r=Object(a.useState)(!1),c=Object(u.a)(r,2),i=c[0],s=c[1];return Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{children:Object(m.jsx)("input",{type:"checkbox",value:t.title,checked:i,onChange:function(){return t._id,s(!i),void n(t._id)}})}),t.title]})},ht=function(e){var t=e.onAddQuestions,n=e.currentQuestions,r=Object(a.useState)([]),c=Object(u.a)(r,2),i=c[0],s=c[1],o=Object(a.useState)([]),l=Object(u.a)(o,2),d=l[0],j=l[1];Object(a.useEffect)((function(){var e=!0;return e&&function(){var e=Object(ae.a)(ie.a.mark((function e(){var t,r;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae.getAll("questions");case 2:t=e.sent,r=t.filter((function(e){return!n.includes(e._id)})),s(r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){return e=!1}}),[n]);var b=function(e){var t=d;if(d.includes(e)){var n=t.indexOf(e);t.splice(n,1)}else t.push(e);j(t)};return Object(m.jsxs)("form",{className:"add-question-form",onSubmit:function(e){e.preventDefault(),t(d)},children:[i.map((function(e){return!n.includes(e)&&Object(m.jsx)(ft,{question:e,addToSelected:b},e._id)})),Object(m.jsx)("input",{type:"submit",value:"Add Questions"})]})},pt=n(32),Ot=n(40);n(126);function mt(e){var t=e.provided,n=e.style,r=e.isDragging,c=Object(j.a)(Object(j.a)({},n),t.draggableProps.style);return Object(j.a)(Object(j.a)({},c),{},{height:r?c.height:c.height-8,marginBottom:8})}function xt(e){var t=e.provided,n=e.item,r=e.style,c=e.isDragging;return Object(m.jsx)("div",Object(j.a)(Object(j.a)(Object(j.a)({},t.draggableProps),t.dragHandleProps),{},{ref:t.innerRef,style:mt({provided:t,style:r,isDragging:c}),className:"item ".concat(c?"is-dragging":""),children:n.title}))}var vt=s.a.memo((function(e){var t=e.data,n=e.index,r=e.style,c=t[n];return Object(m.jsx)(pt.b,{draggableId:c._id,index:n,children:function(e){return Object(m.jsx)(xt,{provided:e,item:c,style:r})}},c._id)}),Ot.b),gt=function(e){var t=e.curquestions,n=e.onChangeOrder,r=Object(a.useState)(t),c=Object(u.a)(r,2),i=c[0],s=c[1];var o=function(e){if(console.log(e),e.destination&&e.source.index!==e.destination.index){var t=function(e,t){var n=i.map((function(e){return e})),r=n.splice(e,1),c=Object(u.a)(r,1)[0];return n.splice(t,0,c),n}(e.source.index,e.destination.index);s(t)}};return Object(m.jsxs)("div",{children:[Object(m.jsx)(pt.a,{onDragEnd:function(e){return o(e)},children:Object(m.jsx)("div",{className:"dnd",children:Object(m.jsx)(pt.c,{droppableId:"droppable",mode:"virtual",renderClone:function(e,t,n){return Object(m.jsx)(xt,{provided:e,isDragging:t.isDragging,item:i[n.source.index]})},children:function(e){return Object(m.jsx)(Ot.a,{height:80*i.length,itemCount:i.length,itemSize:80,width:300,outerRef:e.innerRef,itemData:i,children:vt})}})})}),Object(m.jsx)("button",{onClick:function(){return n(i)},children:"Done"})]})},yt=(n(128),function(e){var t=e.set,n=e.onDelete,r=e.onDuplicate,c=Object(a.useState)(t),i=Object(u.a)(c,2),s=i[0],o=i[1],l=Object(a.useState)([]),d=Object(u.a)(l,2),b=d[0],f=d[1],h=Object(a.useState)(!1),p=Object(u.a)(h,2),O=p[0],x=p[1],v=Object(a.useState)(!1),g=Object(u.a)(v,2),y=g[0],w=g[1];Object(a.useEffect)((function(){var e=!0;return e&&function(){var e=Object(ae.a)(ie.a.mark((function e(){var t,n,r,c,i;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae.getAll("questions");case 2:t=e.sent,n=t.filter((function(e){return s.questions.includes(e._id)})),r=[],c=0;case 6:if(!(c<s.questions.length)){e.next=18;break}i=0;case 8:if(!(i<n.length)){e.next=15;break}if(s.questions[c]!==n[i]._id){e.next=12;break}return r.push(n[i]),e.abrupt("break",15);case 12:i++,e.next=8;break;case 15:c++,e.next=6;break;case 18:f(r);case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){return e=!1}}),[s.questions]);var k=function(){var e=Object(ae.a)(ie.a.mark((function e(n){var r,c,i,a;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae.getOne("sets",t._id);case 2:return r=e.sent,c=r.questions.filter((function(e){return e!==n})),i=Object(j.a)(Object(j.a)({},r),{},{questions:c}),e.next=7,Ae.putOne("sets",t._id,i);case 7:a=e.sent,o(a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(ae.a)(ie.a.mark((function e(n){var r,c,i,a;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae.getOne("sets",t._id);case 2:for(r=e.sent,c=r.questions,i=0;i<n.length;i++)c.push(n[i]);return e.next=7,Ae.putOne("sets",t._id,Object(j.a)(Object(j.a)({},r),{},{questions:c}));case 7:a=e.sent,o(a),x(!O);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(ae.a)(ie.a.mark((function e(t){var n,r,c;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),w(!1),console.log(b),n=t.map((function(e){return e._id})),r={_id:s._id,questions:n},e.next=7,Ae.patchOne("sets",s._id,r);case 7:c=e.sent,o(c);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{className:"set-title",children:Object(m.jsx)("b",{children:t.title})}),s.music&&Object(m.jsx)("h3",{children:Object(m.jsx)("i",{children:"Set will contain music"})}),Object(m.jsx)("button",{onClick:function(){return n(t._id)},children:"Delete Set"}),Object(m.jsx)("button",{onClick:function(){return r(s)},children:"Duplicate Set"}),Object(m.jsx)("button",{onClick:function(){w(!y)},children:"Change Question Order"}),y&&Object(m.jsx)(gt,{curquestions:b,onChangeOrder:N}),Object(m.jsx)("h2",{children:"Questions in Set:"}),Object(m.jsx)("ol",{children:b.map((function(e){return Object(m.jsx)("li",{children:Object(m.jsx)(bt,{question:e,deleteQuestion:k},e._id)},e._id)}))}),Object(m.jsx)("button",{onClick:function(){x(!O)},children:"Add Questions to Set"}),O&&Object(m.jsx)(ht,{className:"addQuestion",onAddQuestions:S,currentQuestions:s.questions})]})}),wt=function(e){var t=e.onAddSet,n=e.setShowAddSet,r=Object(a.useState)(""),c=Object(u.a)(r,2),i=c[0],s=c[1],o=Object(a.useState)(!1),l=Object(u.a)(o,2),d=l[0],j=l[1];return Object(m.jsxs)("form",{className:"add-set-form",onSubmit:function(e){e.preventDefault(),n(!1),i?(t(i,d),s("")):alert("Please add a title")},children:[Object(m.jsx)("h4",{children:"New Set"}),Object(m.jsx)("label",{children:Object(m.jsx)("b",{children:"Title: "})}),Object(m.jsx)("input",{type:"text",placeholder:"Add Title",value:i,onChange:function(e){return s(e.target.value)}}),Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{children:Object(m.jsx)("b",{children:"Is there music associated with this set?"})}),Object(m.jsxs)("div",{onChange:function(e){"yes"===e.target.value?j(!0):j(!1)},children:[Object(m.jsx)("input",{type:"radio",value:"yes",name:"option"})," Yes",Object(m.jsx)("input",{type:"radio",value:"No",name:"option"})," No"]})]}),Object(m.jsx)("input",{className:"submit",type:"submit",value:"Save Set"})]})},kt=function(e){var t=e.onNewQuestion,n=e.setShowAddQuestion,r=Object(a.useState)(""),c=Object(u.a)(r,2),i=c[0],s=c[1],o=Object(a.useState)(""),l=Object(u.a)(o,2),d=l[0],j=l[1],b=Object(a.useState)(""),f=Object(u.a)(b,2),h=f[0],p=f[1];return Object(m.jsxs)("form",{className:"new-question-form",onSubmit:function(e){e.preventDefault(),n(!1),i?d?"multiple-choice"===d&&!h||"check-box"===d&&!h?alert("Please add options for multiple choice and checkbox questions"):t(i,d,h):alert("Please select a question type"):alert("Please add a title")},children:[Object(m.jsx)("h4",{children:"New Question"}),Object(m.jsx)("label",{children:Object(m.jsx)("b",{children:"Title: "})}),Object(m.jsx)("input",{type:"text",placeholder:"Add Title",value:i,onChange:function(e){return s(e.target.value)}}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{children:Object(m.jsx)("b",{children:"Question Type: "})}),Object(m.jsxs)("div",{onChange:function(e){return j(e.target.value)},children:[Object(m.jsx)("input",{type:"radio",value:"multiple-choice",name:"option"})," Multiple Choice",Object(m.jsx)("input",{type:"radio",value:"check-box",name:"option"})," Checkbox",Object(m.jsx)("input",{type:"radio",value:"short-answer",name:"option"})," Short Answer",Object(m.jsx)("input",{type:"radio",value:"color",name:"option"})," Color",Object(m.jsx)("input",{type:"radio",value:"slider",name:"option"})," Slider"]}),("multiple-choice"===d||"check-box"===d)&&Object(m.jsx)("label",{children:"Options (please separate each option with a semicolon)"}),("multiple-choice"===d||"check-box"===d)&&Object(m.jsx)("input",{type:"text",placeholder:"options",value:h,onChange:function(e){return p(e.target.value)}}),Object(m.jsx)("input",{className:"submit",type:"submit",value:"Create New Question"})]})},St=function(e){var t=e.handleDeleteQuestion,n=Object(a.useState)([]),r=Object(u.a)(n,2),c=r[0],i=r[1],s=Object(a.useState)([]),o=Object(u.a)(s,2),l=o[0],d=o[1];Object(a.useEffect)((function(){(function(){var e=Object(ae.a)(ie.a.mark((function e(){var t;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae.getAll("questions");case 2:t=e.sent,i(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var j=function(){var e=Object(ae.a)(ie.a.mark((function e(n){var r,c,i,a,s;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!0!==window.confirm("Delete these questions?")){e.next=34;break}return e.next=5,Ae.getAll("sets");case 5:r=e.sent,console.log(l),c=0;case 8:if(!(c<l.length)){e.next=26;break}i=0;case 10:if(!(i<r.length)){e.next=23;break}a=0;case 12:if(!(a<r[i].questions.length)){e.next=20;break}if(r[i].questions[a]!==l[c]){e.next=17;break}return r[i].questions.splice(a,1),e.next=17,Ae.putOne("sets",r[i]._id,r[i]);case 17:a++,e.next=12;break;case 20:i++,e.next=10;break;case 23:c++,e.next=8;break;case 26:s=0;case 27:if(!(s<l.length)){e.next=33;break}return e.next=30,Ae.deleteOne("questions",l[s]);case 30:s++,e.next=27;break;case 33:t();case 34:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("form",{onSubmit:j,children:[c.map((function(e){return Object(m.jsxs)("div",{onChange:function(e){!function(e){console.log(e);for(var t=[],n=0;n<l.length;n++)t.push(l[n]);console.log("handle checkbox");for(var r=0;r<t.length;r++)if(e===l[r])return t.splice(r,1),void d(t);t.push(e),d(t)}(e.target.value)},children:[Object(m.jsx)("input",{type:"checkbox",value:e._id,name:"question"}),e.title]})})),Object(m.jsx)("input",{className:"submit",type:"submit",value:"Delete Selected Questions"})]})},Nt=(n(129),function(e){var t=e.sets,n=e.onDelete,r=e.onDuplicate,c=e.onAddSet,i=e.onNewQuestion,s=e.onOrderChanged,o=Object(a.useState)(!1),l=Object(u.a)(o,2),d=l[0],j=l[1],b=Object(a.useState)(!1),f=Object(u.a)(b,2),h=f[0],p=f[1],O=Object(a.useState)(!1),x=Object(u.a)(O,2),v=x[0],g=x[1],y=Object(a.useState)(!1),w=Object(u.a)(y,2),k=w[0],S=w[1],N=function(){S(!k)};return Object(m.jsxs)("div",{children:[t.map((function(e){return Object(m.jsx)(yt,{qid:e._id,set:e,onDelete:n,onDuplicate:r,onOrderChanged:s},e._id)})),Object(m.jsx)("button",{className:"big-btn",onClick:function(){j(!d)},children:"Add Set"}),Object(m.jsx)("button",{className:"big-btn",onClick:function(){g(!v)},children:"Change Set Order"}),Object(m.jsx)("button",{className:"big-btn",onClick:function(){p(!h)},children:"Add Questions"}),Object(m.jsx)("button",{className:"big-btn",onClick:function(){return N()},children:"Delete Questions"}),d&&Object(m.jsx)(wt,{onAddSet:c,setShowAddSet:j}),h&&Object(m.jsx)(kt,{onNewQuestion:i,setShowAddQuestion:p}),v&&Object(m.jsx)(gt,{curquestions:t,onChangeOrder:function(e){g(!1),s(e)}}),k&&Object(m.jsx)(St,{handleDeleteQuestion:N})]})});n(130);var Ct=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)([]),s=Object(u.a)(c,2),o=s[0],d=s[1],j=Object(a.useState)([]),b=Object(u.a)(j,2),f=b[0],h=b[1];Object(a.useEffect)((function(){var e=function(){var e=Object(ae.a)(ie.a.mark((function e(){var t,n,c,i,a,s,o,u,l;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae.getAll("sets");case 2:return t=e.sent,e.next=5,Ae.getAll("set-order");case 5:if(0!==(n=e.sent).length){e.next=17;break}for(c=[],i=0;i<t.length;i++)c.push(t[i]._id);return a={sets:c},e.next=12,Ae.post("set-order",a);case 12:s=e.sent,r(s),d(t),e.next=33;break;case 17:r(n[0].sets),o=[],u=0;case 20:if(!(u<n[0].sets.length)){e.next=32;break}l=0;case 22:if(!(l<t.length)){e.next=29;break}if(n[0].sets[u]!==t[l]._id){e.next=26;break}return o.push(t[l]),e.abrupt("break",29);case 26:l++,e.next=22;break;case 29:u++,e.next=20;break;case 32:d(o);case 33:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(ae.a)(ie.a.mark((function e(){var t;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae.getAll("questions");case 2:t=e.sent,h(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),t()}),[]);var p=function(){var e=Object(ae.a)(ie.a.mark((function e(t){var c,i,a;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==window.confirm("Delete this set?")){e.next=10;break}return Ae.deleteOne("sets",t),d(o.filter((function(e){return e._id!==t}))),c=n.filter((function(e){return e!==t})),i={sets:c},e.next=8,Ae.patch("set-order",i);case 8:a=e.sent,r(a.sets);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(ae.a)(ie.a.mark((function e(t){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(t.title,t.music,t.questions);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(ae.a)(ie.a.mark((function e(t,c){var i,a,s,u,j,b,f=arguments;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=f.length>2&&void 0!==f[2]?f[2]:[],a={title:t,questions:i,music:c},e.next=4,Ae.post("sets",a);case 4:return s=e.sent,d([].concat(Object(l.a)(o),[s])),(u=n).push(s._id),j={sets:u},e.next=11,Ae.patch("set-order",j);case 11:b=e.sent,r(b.sets);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=Object(ae.a)(ie.a.mark((function e(t,n,r){var c,i,a;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={title:t,input_type:n},""!==r&&(i=g(r),c.options=i),e.next=4,Ae.post("questions",c);case 4:a=e.sent,h([].concat(Object(l.a)(f),[a]));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function g(e){for(var t=[],n=0,r=0;r<e.length;r++){if(";"===e.charAt(r)){var c=e.substring(n,r).trim();t.push(c),n=r+1}}var i=e.substring(n,e.length).trim();return""!==i&&t.push(i),t}var y=function(){var e=Object(ae.a)(ie.a.mark((function e(t){var n,c,i,a,s;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={sets:t},e.next=3,Ae.patch("set-order",n);case 3:c=e.sent,r(c.sets),i=[],a=0;case 7:if(!(a<c.sets.length)){e.next=19;break}s=0;case 9:if(!(s<t.length)){e.next=16;break}if(c.sets[a]!==t[s]._id){e.next=13;break}return i.push(t[s]),e.abrupt("break",16);case 13:s++,e.next=9;break;case 16:a++,e.next=7;break;case 19:d(i);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:"outer-div admin-container",children:[Object(m.jsx)(i.b,{to:"/admin",children:Object(m.jsx)("button",{children:"Return to Admin Home"})}),Object(m.jsx)("h1",{children:"Sets Currently in Database:"}),Object(m.jsx)("hr",{}),Object(m.jsx)(Nt,{sets:o,onDelete:p,onDuplicate:O,onAddSet:x,onNewQuestion:v,onOrderChanged:y})]})},qt=function(e,t){var n="";if(1===t.length)n=e[t];else for(var r=[].concat(Object(l.a)(e),["None of the Above"]),c=0;c<t.length;c++)"1"===t[c]&&(n+="".concat(r[c],";"));return n},At=n(56),Et=(0,n(131).createObjectCsvStringifier)({header:[{id:"userId",title:"User (ID)"},{id:"pieceInfo",title:"Piece Info"},{id:"questionTitle",title:"Question"},{id:"answer",title:"Answer"}]}),_t=function(e){var t=Et.getHeaderString()+Et.stringifyRecords(e),n=new Blob([t]);Object(At.saveAs)(n,"data.csv")},Dt=function(e,t){var n=0,r=0;for(t[n]&&(r=t[n]);e>=r;)r+=t[n],n+=1;return console.log(e,n),n},It=function(){var e=Object(ae.a)(ie.a.mark((function e(){var t,n,r,c,i,a;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae.getAll("responses");case 2:return t=e.sent,e.next=5,Ae.getAll("questions");case 5:return n=e.sent,e.next=8,Ae.getAll("music");case 8:for(r=e.sent,c=[],i=function(e){for(var i=t[e],a=i._id,s=function(e){var t=r.find((function(t){return null!==t&&t._id===i.musicids[Dt(e,i.questionGroups)]})),s=n.find((function(t){return null!==t&&t._id===i.questions[e]})),o="";o=0===s.options.length?i.answers[e]:qt(s.options,i.answers[e]);for(var u=0;u<s.options;u++);c.push({userId:a,pieceInfo:t?JSON.stringify(t):"No Music",questionTitle:s.title,answer:o})},o=0;o<i.questions.length;o++)s(o)},a=0;a<t.length;a++)i(a);_t(c);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Pt=function(){return Object(m.jsxs)("div",{className:"admin-container",children:[Object(m.jsx)(i.b,{to:"/admin",children:Object(m.jsx)("button",{children:"Return to Admin Home"})}),Object(m.jsx)("button",{onClick:It,children:"Download Data (CSV)"})]})},Rt=function(){return Object(m.jsxs)("div",{className:"admin-container",children:[Object(m.jsx)("h1",{children:"Admin Home Page"}),Object(m.jsx)(i.b,{to:"/admin/modifysurvey",children:Object(m.jsx)("button",{children:"Modify Survey"})}),Object(m.jsx)(i.b,{to:"/admin/uploadmusic",children:Object(m.jsx)("button",{children:"Upload Music"})}),Object(m.jsx)(i.b,{to:"/admin/downloaddata",children:Object(m.jsx)("button",{children:"Download Data"})}),Object(m.jsx)(i.b,{to:"/admin/viewmusic",children:Object(m.jsx)("button",{children:"View/Delete Music"})})]})};var Ft=function(){return B(),H(),Object(m.jsx)(a.Fragment,{children:Object(m.jsxs)(o.d,{children:[Object(m.jsx)(o.b,{path:"/survey",component:Le}),Object(m.jsx)(o.b,{path:"/home",component:Ke}),Object(m.jsx)(Je,{path:"/admin/modifysurvey",component:Ct}),Object(m.jsx)(Je,{path:"/admin/uploadmusic",component:dt}),Object(m.jsx)(Je,{path:"/admin/viewmusic",component:jt}),Object(m.jsx)(Je,{path:"/admin/downloaddata",component:Pt}),Object(m.jsx)(Je,{path:"/admin",component:Rt}),Object(m.jsx)(o.b,{path:"/not-found",component:Ue}),Object(m.jsx)(o.a,{from:"/",exact:!0,to:"/home"}),Object(m.jsx)(o.a,{to:"/not-found"})]})})},Tt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,143)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),i(e),a(e)}))};c.a.render(Object(m.jsx)(i.a,{children:Object(m.jsx)(Ft,{})}),document.getElementById("root")),Tt()},60:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},68:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){}},[[142,1,2]]]);
//# sourceMappingURL=main.0f3ad8db.chunk.js.map