(this.webpackJsonpsurvey=this.webpackJsonpsurvey||[]).push([[0],{103:function(e,t,n){},104:function(e,t,n){},105:function(e,t,n){},106:function(e,t,n){},107:function(e,t,n){},108:function(e,t,n){},127:function(e,t,n){},128:function(e,t,n){},129:function(e,t,n){},130:function(e,t,n){},138:function(e,t,n){},139:function(e,t,n){},141:function(e,t,n){},153:function(e,t,n){"use strict";n.r(t);n(50),n(74);var r=n(23),i=n.n(r),c=n(14),s=n(0),a=n.n(s),o=n(13),l=n(3),u=n(11),d=(n(79),n(48)),j=n(12);n(80);function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function h(e,t){var n=e.title,r=e.titleId,i=f(e,["title","titleId"]);return s.createElement("svg",b({xmlns:"http://www.w3.org/2000/svg",width:105,height:80,viewBox:"0 0 105.4 80.3",ref:t,"aria-labelledby":r},i),n?s.createElement("title",{id:r},n):null,s.createElement("path",{d:"M5.2 4.6 52.7 77 100.2 4.6 52.7 28.4Z",style:{fill:"#662485",strokeWidth:4,stroke:"#662485"}}))}var p,O=s.forwardRef(h),m=(n.p,n(1)),x=function(e){var t=e.revealNext,n=e.handleClicked;return t?Object(m.jsxs)("button",{className:"next-button",onClick:n,children:[Object(m.jsx)("div",{children:"Next"}),Object(m.jsx)(O,{className:"arrow"})]}):""};function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function g(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function y(e,t){var n=e.title,r=e.titleId,i=g(e,["title","titleId"]);return s.createElement("svg",v({xmlns:"http://www.w3.org/2000/svg",width:41.143,height:41.143,viewBox:"0 0 10.886 10.886",ref:t,"aria-labelledby":r},i),n?s.createElement("title",{id:r},n):null,p||(p=s.createElement("circle",{cx:38.947,cy:8.167,r:4.914,opacity:.96,fill:"#fff",fillRule:"evenodd",stroke:"#fff",strokeWidth:1.058,transform:"translate(-33.504 -2.724)"})))}var w,S=s.forwardRef(y);n.p;function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function N(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function C(e,t){var n=e.title,r=e.titleId,i=N(e,["title","titleId"]);return s.createElement("svg",k({width:41.143,height:41.143,viewBox:"0 0 10.886 10.886",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},i),n?s.createElement("title",{id:r},n):null,w||(w=s.createElement("circle",{cx:5.443,cy:5.443,r:5.1529,fill:"none",opacity:.96,stroke:"#fff",strokeWidth:.50001})))}var q=s.forwardRef(C),E=(n.p,function(e){var t=e.responses,n=e.handleResponded,r=Object(s.useState)(-1),i=Object(l.a)(r,2),c=i[0],a=i[1];return Object(s.useEffect)((function(){n(c>-1?c:null)}),[n,c]),Object(m.jsx)("div",{className:"question-mc option-box",children:t.map((function(e,t){return Object(m.jsxs)("div",{className:"option",onClick:function(){return a(t)},children:[Object(m.jsx)("div",{className:"response",children:e}),(n=c,r=t,n===r?Object(m.jsx)(S,{className:"indicator"}):Object(m.jsx)(q,{className:"indicator"}))]},t);var n,r}))})});function A(){return(A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function D(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function I(e,t){var n=e.title,r=e.titleId,i=D(e,["title","titleId"]);return s.createElement("svg",A({xmlns:"http://www.w3.org/2000/svg",width:53,height:53,viewBox:"0 0 52.9 52.9",ref:t,"aria-labelledby":r},i),n?s.createElement("title",{id:r},n):null,s.createElement("rect",{width:52.9,height:52.9,style:{fill:"#fff",strokeWidth:4}}))}var P=s.forwardRef(I);n.p;function Q(){return(Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function R(e,t){var n=e.title,r=e.titleId,i=_(e,["title","titleId"]);return s.createElement("svg",Q({xmlns:"http://www.w3.org/2000/svg",width:53,height:53,viewBox:"0 0 52.9 52.9",ref:t,"aria-labelledby":r},i),n?s.createElement("title",{id:r},n):null,s.createElement("rect",{width:52.9,height:52.9,style:{fill:"none",strokeWidth:4,stroke:"#fff"}}))}var T=s.forwardRef(R),F=(n.p,function(e,t){return!0===e[t]?Object(m.jsx)(P,{className:"indicator"}):Object(m.jsx)(T,{className:"indicator"})}),M=function(e){var t=e.responses,n=e.handleResponded;t=[].concat(Object(u.a)(t),["None of the above"]);for(var r=[],i=0;i<t.length;i++)r[i]=!1;var c=Object(s.useState)(r),a=Object(l.a)(c,2),o=a[0],d=a[1];return Object(s.useEffect)((function(){o.find((function(e){return!0===e}))?n(o):n(null)}),[o,n]),Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Select all that apply."}),Object(m.jsx)("div",{className:"question-ms option-box",children:t.map((function(e,t){return Object(m.jsxs)("div",{className:"option",onClick:function(){d(function(e,t){if(t===e.length-1)for(var n=0;n<t;n++)e[n]=!1;return e[e.length-1]&&t!==e.length-1&&(e[e.length-1]=!1),e[t]=!e[t],e}(Object(u.a)(o),t))},children:[Object(m.jsx)("div",{className:"response",children:e}),F(o,t)]},t)}))})]})},L=(n(82),n(27)),W=n.n(L);function B(){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))}function H(){window.addEventListener("resize",B)}function G(){window.removeEventListener("resize",B)}function K(){H()}var U=W.a.object({textfield:W.a.string().min(2).max(350).required().label("Answer")});var V=function(e){var t=e.handleResponded,n=Object(s.useState)(null),r=Object(l.a)(n,2),i=r[0],c=r[1],a=Object(s.useState)(""),o=Object(l.a)(a,2),u=o[0],d=o[1];return Object(s.useEffect)((function(){t(i)}),[t,i]),Object(m.jsxs)("div",{className:"question-fr",children:[Object(m.jsx)("textarea",{maxLength:"350",rows:"6",placeholder:"Write your answer here",onTouchEnd:G,onMouseLeave:K,onChange:function(e){return function(e,t,n){var r=e.target.value,i=U.validate({textfield:r}).error;i?(t(null),n(i.message)):(t(r),n(""))}(e,c,d)}}),Object(m.jsx)("div",{className:"error",children:u})]})},z=(n(103),n(104),function(e){var t=e.text,n=e.onClick;return Object(m.jsx)("button",{className:"user-button",onClick:n,children:t})});function Y(e,t){return Object(m.jsx)(E,{responses:["Yes","No"],handleResponded:function(n){!function(e,t,n){0===e?(t(!0),n(!1)):1===e&&(n(!0),t(!1))}(n,e,t)}})}var J=function(e){e.responses;var t=e.handleResponded,n=Object(s.useState)(!1),r=Object(l.a)(n,2),i=r[0],c=r[1],a=Object(s.useState)(!1),o=Object(l.a)(a,2),u=o[0],d=o[1],j=Object(s.useState)("#000000"),b=Object(l.a)(j,2),f=b[0],h=b[1],p=[c,d];return Object(s.useEffect)((function(){var e="No Color";i&&(e=f),t(i||u?e:null)})),u||!i&!u?Y.apply(void 0,p):Object(m.jsxs)("div",{className:"question-color",children:[Object(m.jsx)("p",{children:"Select the color: "}),Object(m.jsx)("input",{type:"color",onChange:function(e){return h(e.target.value)}}),Object(m.jsx)(z,{text:"Go Back",onClick:function(){c(!1)}})]})},Z=function(e){var t=e.handleResponded;return Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"1: Strongly Disagree | 2: Disagree | 3: Neutral | 4: Agree | 5: Strongly Agree"}),Object(m.jsxs)("div",{style:{display:"flex",flexDirection:"column",maxWidth:"15rem",margin:"0 auto"},children:[Object(m.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[1,2,3,4,5].map((function(e){return Object(m.jsx)("p",{style:{fontWeight:"bold"},children:e},e)}))}),Object(m.jsx)("input",{type:"range",max:"5",min:"1",step:"1",defaultValue:"3",onChange:function(e){t(e.target.value)}})]})]})};function $(e,t,n){var r={responses:t,handleResponded:n};return"multiple-choice"===e?Object(m.jsx)(E,Object(j.a)({},r)):"check-box"===e?Object(m.jsx)(M,Object(j.a)({},r)):"short-answer"===e?Object(m.jsx)(V,Object(j.a)({},r)):"color"===e?Object(m.jsx)(J,Object(j.a)({},r)):"slider"===e?Object(m.jsx)(Z,Object(j.a)({},r)):void 0}var X,ee=function(e){var t=e.question,n=e.handleResponse,r=t.type,i=t.responses,c=t.ask,a=Object(s.useState)(null),o=Object(l.a)(a,2),u=o[0],d=o[1],j=Object(s.useState)(!1),b=Object(l.a)(j,2),f=b[0],h=b[1];return Object(m.jsxs)("div",{className:"question",children:[Object(m.jsx)("h1",{children:c}),$(r,i,(function(e){d(e)})),Object(m.jsx)("div",{className:"next",children:Object(m.jsx)(x,{revealNext:null!==u&!f,handleClicked:function(){!function(e,t,n){t(e),n(!0)}(u,n,h)}})})]})},te=function(e){var t=e.questions,n=e.currentQuestion,r=e.handleResponse;return Object(d.b)(t[n],(function(e){return e.ask}),{from:{transform:0===n?"translate3d(0, 0%, 0)":"translate3d(0, 100%, 0)"},enter:{transform:"translate3d(0, 0, 0)"},leave:{transform:n===t.length-1?"translate3d(0, 0, 0)":"translate3d(0, -100%, 0)"}}).map((function(e){var t=e.item,n=e.props,i=e.key;return Object(m.jsx)(d.a.div,{className:"question-animator",style:n,children:Object(m.jsx)(ee,{question:t,handleResponse:r})},i)}))},ne=(n(105),n(106),function(e,t){for(var n=[],r=0;r<e;r++)r<t?n.push(Object(m.jsx)(S,{className:"circle"},r)):n.push(Object(m.jsx)(q,{className:"circle"},r));return n}),re=function(e){var t=e.numQuestions,n=e.currentQuestion;return Object(m.jsx)("div",{className:"fixed-UI",children:Object(m.jsx)("div",{className:"circles",children:ne(t,n)})})},ie=n(6),ce=n.n(ie),se=n(7),ae=(n(107),n(35));function oe(){return(oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function le(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function ue(e,t){var n=e.title,r=e.titleId,i=le(e,["title","titleId"]);return s.createElement("svg",oe({width:"27.059mm",height:"26.944mm",viewBox:"0 0 27.059 26.944",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},i),n?s.createElement("title",{id:r},n):null,X||(X=s.createElement("g",{transform:"translate(-89.884 -78.943)"},s.createElement("path",{transform:"matrix(1.1129 0 0 .99792 -10.183 .19219)",d:"m113.73 92.415c0 1.2974-21.347 13.622-22.471 12.974-1.1235-0.64868-1.1235-25.298 0-25.947 1.1235-0.64868 22.471 11.676 22.471 12.974z",fill:"#fff",fillRule:"evenodd",opacity:.96,stroke:"#dcdcdc"}))))}var de,je,be=s.forwardRef(ue);n.p;function fe(){return(fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function he(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function pe(e,t){var n=e.title,r=e.titleId,i=he(e,["title","titleId"]);return s.createElement("svg",fe({width:"27.059mm",height:"26.944mm",viewBox:"0 0 27.059 26.944",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},i),n?s.createElement("title",{id:r},n):null,de||(de=s.createElement("rect",{x:16.527,y:.74865,width:7.4985,height:25.447,rx:.17777,ry:.22071,fill:"#fff",fillRule:"evenodd",opacity:.96,stroke:"#dcdcdc",strokeWidth:1.4973})),je||(je=s.createElement("rect",{x:3.0334,y:.74865,width:7.4985,height:25.447,rx:.17777,ry:.22071,fill:"#fff",fillRule:"evenodd",opacity:.96,stroke:"#dcdcdc",strokeWidth:1.4973})))}var Oe=s.forwardRef(pe),me=(n.p,function(e){switch(e.playState){case"paused":return Object(m.jsx)(be,{className:"player play-button"});case"playing":return Object(m.jsx)(Oe,{className:"player pause-buton"});default:return"Error"}}),xe=function(e){var t=e.canContinue,n=e.handleContinueClicked;return t&&Object(m.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginTop:"1rem"},children:[Object(m.jsx)("button",{className:"music-continue",onClick:n,children:"Continue to questions"}),Object(m.jsx)("p",{children:"Note: Continuing will end the music."})]})},ve=function(e,t,n){switch(e){case"paused":return n.play(),void t("playing");case"playing":return n.pause(),void t("paused");default:return}},ge=(n(108),function(e){var t=Object(s.useState)(0),n=Object(l.a)(t,2),r=n[0],i=n[1],c=Object(s.useRef)(null),a=e.size,o=e.progress,u=e.strokeWidth,d=a/2,j=a/2-u/2,b=2*Math.PI*j;return Object(s.useEffect)((function(){i((100-o)/100*b),c.current.style="transition: stroke-dashoffset 300ms linear"}),[i,o,b,r]),Object(m.jsx)("div",{className:"progress-bar",children:Object(m.jsxs)("svg",{className:"svg",width:a,height:a,children:[Object(m.jsx)("circle",{className:"svg-circle-bg",cx:d,cy:d,r:j,strokeWidth:u}),Object(m.jsx)("circle",{className:"svg-circle",ref:c,cx:d,cy:d,r:j,strokeWidth:u,strokeDasharray:b,strokeDashoffset:r})]})})}),ye=n(18),we=n.n(ye),Se=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_PORT:"31313"}),ke=Se.REACT_APP_LOCALHOST,Ne=Se.REACT_APP_API_PORT,Ce=ke?"http://localhost:".concat(Ne):"https://sonicremedies.net:".concat(Ne),qe=function(e){console.error(e.message)},Ee={postToken:function(){we.a.defaults.headers.common.authorization=localStorage.getItem("token")},refreshLogin:function(){window.confirm("Your session is about to expire. Would you like to extend it another 30 minutes?")&&we.a.get(Ce+"/login/refresh").then((function(e){console.log(e.data),localStorage.setItem("token",e.data),we.a.defaults.headers.common.authorization=localStorage.getItem("token")})).catch(qe)},getAll:function(e){return we.a.get(Ce+"/"+e).then((function(e){return e.data})).catch(qe)},getOne:function(e,t){return we.a.get(Ce+"/"+e+"/"+t).then((function(e){return e.data})).catch(qe)},getOneFile:function(e,t){return we()({method:"GET",url:Ce+"/"+e+"/"+t,responseType:"blob"}).then((function(e){return e.data})).catch(qe)},post:function(e,t){return we.a.post(Ce+"/"+e,t).then((function(e){return e.data})).catch(qe)},postForm:function(e,t){return we()({method:"post",url:Ce+"/"+e,data:t,headers:{"Content-Type":"multipart/form-data"}})},deleteOne:function(e,t){return we.a.delete(Ce+"/"+e+"/"+t).then((function(e){return e.data})).catch(qe)},patch:function(e,t){return we.a.patch(Ce+"/"+e,t).then((function(e){return e.data})).catch(qe)},patchOne:function(e,t,n){return we.a.patch(Ce+"/"+e+"/"+t,n).then((function(e){return e.data})).catch(qe)},putOne:function(e,t,n){return we.a.put(Ce+"/"+e+"/"+t,n).then((function(e){return e.data})).catch(qe)}},Ae=function(){var e=Object(se.a)(ce.a.mark((function e(t,n){var r,i;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee.getOneFile("music/files",t);case 2:r=e.sent,(i=new ae.Howl({src:[URL.createObjectURL(r)],html5:!0,format:"mp3"})).on("loaderror",(function(){throw Error("Howler error loading downloaded file")})),n(i);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),De=function(e){var t=e.filename,n=e.handleMusicDone,r=Object(s.useState)("paused"),i=Object(l.a)(r,2),c=i[0],a=i[1],o=Object(s.useState)(!1),u=Object(l.a)(o,2),d=u[0],j=u[1],b=Object(s.useState)(null),f=Object(l.a)(b,2),h=f[0],p=f[1],O=Object(s.useState)(0),x=Object(l.a)(O,2),v=x[0],g=x[1],y=Object(s.useCallback)((function(){h.seek()>h.duration()/2&&(clearInterval(y),j(!0))}),[h]),w=Object(s.useCallback)((function(){g(h.seek()/h.duration()*100)}),[h]);return Object(s.useEffect)((function(){!h&&t&&Ae(t+".mp3",p)}),[h,t]),Object(s.useEffect)((function(){if(h){var e=setInterval(y,1e3),t=setInterval(w,300);return h.on("end",(function(){h.seek(0),a("paused")})),function(){clearInterval(e),clearInterval(t),h.unload()}}}),[y,w,h]),h?Object(m.jsxs)(s.Fragment,{children:[Object(m.jsxs)("div",{className:"music-player",onClick:function(){return ve(c,a,h)},children:[Object(m.jsx)(ge,{size:180,progress:v,strokeWidth:6}),Object(m.jsx)(me,{playState:c})]}),Object(m.jsx)(xe,{canContinue:d,handleContinueClicked:function(){h.pause(),n()}})]}):Object(m.jsx)("h1",{children:"Loading audio..."})},Ie=(n(127),function(e){var t=e.setId,n=e.totalSets,r=e.clickContinue;return Object(m.jsxs)("div",{className:"orientation-page global-container",children:[Object(m.jsxs)("h1",{children:["Question set ",t+1," / ",n]}),Object(m.jsx)(z,{text:"Continue",onClick:r})]})}),Pe=(n(128),function(){return Object(m.jsx)("div",{className:"global-container complete-page",children:Object(m.jsx)("h1",{children:"You have completed the survey. Thank you!"})})}),Qe=function(e){var t=e.musicFilename,n=e.setId,r=e.set,i=e.setCurrentSet,c=e.totalSets,a=e.postResponse,o=r.questions,d=Object(s.useState)(0),j=Object(l.a)(d,2),b=j[0],f=j[1],h=Object(s.useState)("orientation"),p=Object(l.a)(h,2),O=p[0],x=p[1],v=Object(s.useState)([]),g=Object(l.a)(v,2),y=g[0],w=g[1];switch(O){case"orientation":return Object(m.jsx)(Ie,{setId:n,totalSets:c,clickContinue:function(){r.music?x("music"):x("questions")}});case"music":return Object(m.jsx)("div",{className:"music-page global-container",children:Object(m.jsx)(De,{filename:t,handleMusicDone:function(){x("questions")}})});case"questions":return Object(m.jsxs)("div",{className:"set global-container",children:[Object(m.jsx)("div",{className:"set-questions",children:Object(m.jsx)(te,{questions:o,currentQuestion:b,handleResponse:function(e){var t=[].concat(Object(u.a)(y),[e]);w(t),b===o.length-1?n!==c-1?(f(0),i(n+1),x("orientation")):(x("complete"),a(t)):f(b+1)}})}),Object(m.jsx)(re,{numQuestions:o.length,currentQuestion:b})]});case"complete":return Object(m.jsx)(Pe,{});default:return null}},_e=function(e,t){var n=[];return e.forEach((function(e){var r=[];e.questions.forEach((function(e){var n=t[e];r.push({ask:n.title,responses:n.options,type:n.input_type,id:n._id})})),n.push({questions:r,music:e.music})})),{sets:n}},Re=function(){var e=Object(se.a)(ce.a.mark((function e(){var t,n;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee.getAll("sets");case 2:return t=e.sent,e.next=5,Ee.getAll("questions/idict");case 5:return n=e.sent,e.abrupt("return",_e(t,n));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Te=n(72),Fe=function(){var e=Object(se.a)(ce.a.mark((function e(t){var n,r,i,c,s;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.filter((function(e){return e.music})).length,e.next=3,Ee.getAll("music");case 3:return r=e.sent,i=Te.a.sample(r,n),c=-1,s=[],t.map((function(e){return e.music?s.push(i[c+=1]._id):s.push(null)})),e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Me=function(){var e=Object(s.useState)(0),t=Object(l.a)(e,2),n=t[0],r=t[1],i=Object(s.useState)(null),c=Object(l.a)(i,2),a=c[0],o=c[1],u=Object(s.useState)([]),d=Object(l.a)(u,2),j=d[0],b=d[1];Object(s.useEffect)((function(){Re().then((function(e){return o(e),e.sets})).then((function(e){return Fe(e)})).then((function(e){b(e)}))}),[]);if(null!==a&&void 0!==a){var f=a.sets;return Object(m.jsx)(Qe,{musicFilename:j[n],setId:n,set:f[n],nextSet:f[n+1],setCurrentSet:r,totalSets:f.length,postResponse:function(e){for(var t=[],n=[],r=[],i=[],c=0;c<a.sets.length;c++){var s=a.sets[c];r.push(s.questions.length);for(var o=0;o<s.questions.length;o++)t.push(s.questions[o].id),n.push(s.questions[o].type)}for(var l=0;l<e.length;l++)if("multiple-choice"===n[l]||"color"===n[l]||"slider"===n[l])i.push(e[l].toString());else if("short-answer"===n[l])i.push(e[l]);else if("check-box"===n[l]){for(var u="",d=0;d<e[l].length;d++)e[l][d]?u+="1":u+="0";i.push(u)}var b={musicids:j,questionGroups:r,questions:t,answers:i};Ee.post("responses",b)}})}return null},Le=n(20),We=n(26),Be=n(25),He=n(24),Ge=(n(129),n(130),function(e){Object(Be.a)(n,e);var t=Object(He.a)(n);function n(){var e;Object(Le.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={},e}return Object(We.a)(n,[{key:"render",value:function(){return Object(m.jsxs)("div",{className:"home global-container",children:[Object(m.jsx)("h1",{children:"Welcome to Sonic Remedies!"}),Object(m.jsx)("p",{children:"The purpose of this site is to support research which investigates the relationship our minds and bodies have with music."}),Object(m.jsx)("p",{children:"In particular, the Sonic Remedies team seeks to identify specific elements of musical construction and expression for the purpose of prescribing remedies for healing."}),Object(m.jsxs)("p",{children:["Your participation here is entirely voluntary and without compensation. Your responses are anonymous and utilized strictly to support research. You won\u2019t be asked to pay for anything or offered products and services for sale."," "]}),Object(m.jsx)("p",{children:"For this survey, you will be asked a series of questions and presented with approximately five short musical excerpts, for which you will need to share both mental and physical responses. The survey will take approximately 15 minutes. We appreciate your involvement in this study and hope you enjoy the journey."}),Object(m.jsx)(c.b,{to:"/survey",children:Object(m.jsx)(z,{text:"Begin"})})]})}}]),n}(s.Component)),Ke=function(){return Object(m.jsx)("h1",{className:"global-h1",children:"Page Not Found."})},Ue=n(73),Ve=n(19),ze=n(36),Ye=function(){var e=Object(se.a)(ce.a.mark((function e(t,n,r){var i;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee.post("login",t);case 2:(i=e.sent)?(localStorage.setItem("token",i),Ee.postToken(),window.setInterval(Ee.refreshLogin,168e4),n(!0)):(n(!1),r("The password was incorrect. Try Again."));case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Je=function(e){var t=e.setLoggedIn,n=Object(s.useState)({username:"admin",password:""}),r=Object(l.a)(n,2),i=r[0],c=r[1],a=Object(s.useState)(""),o=Object(l.a)(a,2),u=o[0],d=o[1];return Object(m.jsxs)("div",{className:"admin-container",children:[Object(m.jsx)("h1",{children:"Please login as admin to continue"}),Object(m.jsxs)("form",{children:[Object(m.jsx)("label",{children:"Username"}),Object(m.jsx)("input",{defaultValue:"admin",onChange:function(e){return c({username:e.target.value,password:i.password})}}),Object(m.jsx)("label",{children:"Password"}),Object(m.jsx)("input",{type:"password",onChange:function(e){return c({username:i.username,password:e.target.value})}}),Object(m.jsx)(Ve.a,{onClick:function(e){e.preventDefault(),Ye(i,t,d)},children:"Login"})]}),Object(m.jsx)(ze.a,{variant:"danger",style:{display:u.length?"":"none"},children:u})]})},Ze=function(){var e=Object(se.a)(ce.a.mark((function e(t,n,r){var i;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee.getAll("login/me",t);case 2:i=e.sent,r(i);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),$e=function(e){var t=e.component,n=Object(Ue.a)(e,["component"]),r=Object(s.useState)(""),i=Object(l.a)(r,2),c=i[0],a=i[1],u=Object(s.useState)(!1),d=Object(l.a)(u,2),b=d[0],f=d[1];return Object(s.useEffect)((function(){Ze(localStorage.getItem("token"),f,a),"admin"===c&&f(!0)}),[c]),Object(m.jsxs)("div",{children:[!b&&Object(m.jsx)("div",{children:Object(m.jsx)(Je,{setLoggedIn:f})}),Object(m.jsx)(o.b,Object(j.a)(Object(j.a)({},n),{},{render:function(e){if(!0===b)return Object(m.jsx)(t,Object(j.a)({},e))}}))]})},Xe=(n(138),W.a.object({filename:W.a.string().pattern(/.+.(mp3)$/),textfield:W.a.string().max(30),number:W.a.number().max(1e3).min(1)})),et=function(e,t,n,r,i,c){var s=Object(u.a)(e),a=t.target.value,o=("number"===c?Xe.validate({number:a}):Xe.validate({textfield:a})).error;if(!o){s[i]="",n(s);var l=!0;s.forEach((function(e){(e||void 0===e)&&(l=!1)})),r(l)}o&&(s[i]=t.target.name+" "+o.message.split('"')[2],n(s),r(!1))},tt=[{name:"title",readable:"Title",example:"Stupid Love"},{name:"artist",readable:"Artist",example:"Lady Gaga"},{name:"album",readable:"Album",example:"Chromatica"},{name:"genre",readable:"Genre",example:"Pop"},{name:"tempo",readable:"Tempo (bpm)",example:"118",type:"number"}],nt=function(e){var t=e.validator,n=e.setFieldsFilled,r=e.sendFields,i=[];tt.forEach((function(){return i.push(void 0)}));var c=Object(s.useState)(i),a=Object(l.a)(c,2),o=a[0],u=a[1],d=Object(s.useState)({}),b=Object(l.a)(d,2),f=b[0],h=b[1];return Object(m.jsx)("div",{children:tt.map((function(e,i){return Object(m.jsxs)("div",{className:"field-container",children:[Object(m.jsxs)("div",{className:"fc-main",children:[Object(m.jsx)("label",{htmlFor:e.name,children:e.readable}),Object(m.jsx)("input",{required:!0,type:"text",name:e.name,placeholder:"Ex. "+e.example,onChange:function(c){t(o,c,u,n,i,e.type);var s=Object(j.a)({},f);s[e.name]=c.target.value.toLowerCase(),h(s),r(s)}})]}),Object(m.jsx)("p",{className:"fc-err",children:o[i]})]},e.name)}))})},rt="Consistent Vibe",it=function(e){var t=e.setField;return Object(m.jsx)("div",{className:"field-container",children:Object(m.jsxs)("div",{className:"fc-main",children:[Object(m.jsx)("label",{htmlFor:rt,children:rt}),Object(m.jsxs)("div",{style:{minWidth:"55%",display:"flex",justifyContent:"flex-end"},children:[Object(m.jsxs)("div",{className:"yes-no-option",children:[Object(m.jsx)("label",{htmlFor:"yes",children:"Yes"}),Object(m.jsx)("input",{type:"radio",id:"yes",name:rt,value:!0,onChange:function(e){return t(e.target.value)}})]}),Object(m.jsxs)("div",{className:"yes-no-option",children:[Object(m.jsx)("label",{htmlFor:"no",children:"No"}),Object(m.jsx)("input",{type:"radio",id:"no",name:rt,value:!1,defaultChecked:!0,onChange:function(e){return t(!e.target.value)}})]})]})]})},rt)},ct=function(e){var t=e.setField,n="Improvisation";return Object(m.jsx)("div",{className:"field-container",children:Object(m.jsxs)("div",{className:"fc-main",children:[Object(m.jsx)("label",{htmlFor:n,children:n}),Object(m.jsxs)("div",{style:{display:"flex",flexDirection:"column",minWidth:"55%"},children:[Object(m.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:["0%","25%","50%","75%","100%"].map((function(e){return Object(m.jsx)("div",{style:{fontSize:"10px"},children:e},e)}))}),Object(m.jsx)("input",{id:n,name:n,type:"range",min:"0",max:"100",step:"25",defaultValue:"0",onChange:function(e){return t(e.target.value)}})]})]})},n)},st=["A","B","C","D","E","F","G","N/A"],at=["Major","Minor","Dorian","Phrygian","Lydian","Mixolydian","Locrian","N/A"],ot=function(e,t,n,r){return"N/A"===e?"N/A":e+(t?"f":n?"s":"")+("N/A"!==r?r:"")},lt=function(e){var t=e.setPrevailingKey,n=Object(s.useState)(!1),r=Object(l.a)(n,2),i=r[0],c=r[1],a=Object(s.useState)(!1),o=Object(l.a)(a,2),u=o[0],d=o[1],j=Object(s.useState)(!1),b=Object(l.a)(j,2),f=b[0],h=b[1],p=Object(s.useState)("N/A"),O=Object(l.a)(p,2),x=O[0],v=O[1],g=Object(s.useState)("Major"),y=Object(l.a)(g,2),w=y[0],S=y[1];return Object(m.jsx)("div",{className:"field-container",children:Object(m.jsxs)("div",{className:"fc-main",children:[Object(m.jsx)("label",{htmlFor:"Prevailing Key",children:"Prevailing Key"}),Object(m.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-end",alignItems:"",minWidth:"55%"},children:[Object(m.jsx)("select",{defaultValue:"N/A",name:"Prevailing Key",onChange:function(e){"N/A"===e.target.value?(c(!1),d(!1),h(!1),S("Major")):c(!0),v(e.target.value),t(ot(e.target.value,u,f,w))},children:st.map((function(e){return Object(m.jsx)("option",{value:e,children:e},e)}))}),i?Object(m.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"end",marginTop:"0.5rem"},children:[Object(m.jsxs)("div",{style:{marginRight:"0.5rem"},children:[Object(m.jsx)("label",{htmlFor:"\u266f",children:"\u266f"}),Object(m.jsx)("input",{style:{width:"1rem"},type:"checkbox",name:"\u266f",disabled:u,onChange:function(){t(ot(x,u,!f,w)),h(!f)}})]}),Object(m.jsxs)("div",{style:{marginRight:"0.5rem"},children:[Object(m.jsx)("label",{htmlFor:"\u266d",children:"\u266d"}),Object(m.jsx)("input",{style:{width:"1rem"},type:"checkbox",name:"\u266d",disabled:f,onClick:function(){t(ot(x,!u,f,w)),d(!u)}})]}),Object(m.jsx)("select",{name:"Key Quality",onChange:function(e){S(e.target.value),t(ot(x,u,f,e.target.value))},defaultValue:"Major",children:at.map((function(e){return Object(m.jsx)("option",{value:e,children:e},e)}))})]}):null]})]})})},ut=function(){var e=Object(se.a)(ce.a.mark((function e(t,n){var r,i;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ee.post("music",t);case 3:(r=e.sent)?r.error?alert(r.error):((i=new FormData).append("filename",r._id),i.append("file",n),Ee.postForm("music/files",i),alert("Success!")):alert("Failure. You may need to login again."),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),dt=function(e,t,n,r,i){if(e.target.files[0]&&"audio/mpeg"===e.target.files[0].type){var c=e.target.files[0],s=window.URL.createObjectURL(c),a=new ae.Howl({src:[s],format:"mp3"});a.on("loaderror",(function(){t(null),n("File could not be loaded. May be corrupted mp3 file."),r(!1)})),a.on("load",(function(){t(Math.trunc(a.duration())),n(""),i(c),r(!0)}))}else n("Invalid File or No File Selected"),r(!1)},jt=function(){var e=Object(s.useState)(!1),t=Object(l.a)(e,2),n=t[0],r=t[1],i=Object(s.useState)(!1),c=Object(l.a)(i,2),a=c[0],o=c[1],u=Object(s.useState)(""),d=Object(l.a)(u,2),b=d[0],f=d[1],h=Object(s.useState)(null),p=Object(l.a)(h,2),O=p[0],x=p[1],v=Object(s.useState)({prevailingKey:"N/A",improvisation:0,consistent_vibe:!1}),g=Object(l.a)(v,2),y=g[0],w=g[1],S=function(e){for(var t=Object(j.a)({},y),n=0,r=Object.entries(e);n<r.length;n++){var i=Object(l.a)(r[n],2),c=i[0],s=i[1];t[c]=s}w(t)};return Object(m.jsxs)("form",{children:[Object(m.jsx)("input",{required:!0,type:"file",onInput:function(e){dt(e,(function(e){return S({duration:e})}),f,r,x)},accept:"audio/mp3"}),Object(m.jsx)("p",{className:"err",children:b}),Object(m.jsx)(nt,{validator:et,setFieldsFilled:o,sendFields:function(e){return S(e)}}),Object(m.jsx)(lt,{setPrevailingKey:function(e){return S({prevailingKey:e})}}),Object(m.jsx)(ct,{setField:function(e){return S({improvisation:e})}}),Object(m.jsx)(it,{setField:function(e){return S({consistent_vibe:e})}}),Object(m.jsx)(Ve.a,{onClick:function(e){e.preventDefault(),window.confirm("Are you sure you want to submit this?")&&ut(y,O)},style:n&&a?{}:{display:"none"},children:"Submit"})]})},bt=function(){return Object(m.jsxs)("div",{className:"admin-container upload-music",children:[Object(m.jsx)(c.b,{to:"/admin",children:Object(m.jsx)(Ve.a,{children:"Return to Admin Home"})}),Object(m.jsx)("h1",{children:"Upload a music file (.mp3)"}),Object(m.jsx)(jt,{})]})},ft=function(){var e=Object(s.useState)([]),t=Object(l.a)(e,2),n=t[0],r=t[1],i=function(){var e=Object(se.a)(ce.a.mark((function e(){return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=r,e.next=3,Ee.getAll("music");case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){i()})),Object(m.jsxs)("div",{className:"admin-container",children:[Object(m.jsx)(c.b,{to:"/admin",children:Object(m.jsx)(Ve.a,{children:"Return to Admin Home"})}),0===n.length?Object(m.jsx)("h1",{children:"No Music in DB"}):"",n.map((function(e){return Object(m.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},children:[Object(m.jsx)("div",{style:{margin:"1rem"},children:e.title}),Object(m.jsx)("div",{style:{margin:"1rem"},children:e.artist}),Object(m.jsx)(Ve.a,{style:{margin:"1rem"},onClick:function(){var t;window.confirm("Delete this music from the DB?")&&(t=e._id,Ee.deleteOne("music",t))},children:"Delete"})]},e._id)}))]})},ht=n(68),pt=n(156),Ot=n(69),mt=n(155),xt=function(e){var t=e.src,n=e.width;return Object(m.jsx)("div",{style:{width:n||"3rem",margin:0},children:Object(m.jsx)("img",{src:t,className:"icon",width:"100%",style:{margin:0},alt:"icon"})})},vt=n.p+"static/media/trash.e5393ef6.svg",gt=n.p+"static/media/file-earmark-music.8c81c00e.svg",yt=n.p+"static/media/clipboard-check.efcd7d55.svg",wt=function(e){var t=e.old,n=e.onEditTitle,r=e.setEditingTitle,i=e.id,c=e.index,a=Object(s.useState)("Good to go!"),o=Object(l.a)(a,2),u=o[0],d=o[1],j=Object(s.useState)(t),b=Object(l.a)(j,2),f=b[0],h=b[1];return Object(m.jsxs)("form",{children:[Object(m.jsx)("label",{htmlFor:"title",children:"New Name: "}),Object(m.jsx)("input",{onChange:function(e){return function(e,t,n,r){""===t?n("Name cannot be empty."):(n("Good to go!"),r(t))}(0,e.target.value,d,h)},className:"form-control",id:"title",defaultValue:t}),Object(m.jsx)(ze.a,{variant:"Good to go!"===u?"success":"danger",children:u}),Object(m.jsx)(Ve.a,{disabled:"Good to go!"!==u,onClick:function(){n(i,f,c),r(!1)},children:"Confirm"})]})},St=function(e){var t=e.question,n=e.addToSelected,r=Object(s.useState)(!1),i=Object(l.a)(r,2),c=i[0],a=i[1];return Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{children:Object(m.jsx)("input",{type:"checkbox",value:t.title,checked:c,onChange:function(){return t._id,a(!c),void n(t._id)}})}),t.title]})},kt=function(e){var t=e.setCurrentQuestions,n=e.currentQuestions,r=e.id,i=e.allQuestions,c=Object(s.useState)([]),a=Object(l.a)(c,2),o=a[0],d=a[1],j=i.filter((function(e){return!n.includes(e._id)})),b=function(e){var t=o;if(o.includes(e)){var n=t.indexOf(e);t.splice(n,1)}else t.push(e);d(t)};return Object(m.jsxs)("form",{className:"add-question-form",onSubmit:function(e){e.preventDefault(),t([].concat(Object(u.a)(n),Object(u.a)(o))),Ee.patchOne("sets",r,{questions:[].concat(Object(u.a)(n),Object(u.a)(o))})},children:[j.map((function(e){return!n.includes(e)&&Object(m.jsx)(St,{question:e,addToSelected:b},e._id)})),Object(m.jsx)("input",{className:"btn btn-primary",type:"submit",value:"Confirm"})]})},Nt=function(e){var t=e.setCurrentQuestions,n=e.currentQuestions,r=e.id,i=e.allQuestions,c=Object(s.useState)([]),a=Object(l.a)(c,2),o=a[0],u=a[1],d=i.filter((function(e){return n.includes(e._id)})),j=function(e){var t=o;if(o.includes(e)){var n=t.indexOf(e);t.splice(n,1)}else t.push(e);u(t)};return Object(m.jsxs)("form",{className:"add-question-form",onSubmit:function(e){e.preventDefault();var n=d.filter((function(e){return!o.includes(e._id)}));t(n.map((function(e){return e._id}))),Ee.patchOne("sets",r,{questions:n})},children:[d.map((function(e){return Object(m.jsx)(St,{question:e,addToSelected:j},e._id)})),Object(m.jsx)("input",{className:"btn btn-primary",type:"submit",value:"Confirm"})]})},Ct=function(e){var t=e.currentMod,n=e.buttonMod,r=e.children,i=e.setMod,c=e.disabled,s=t===n;return Object(m.jsx)(Ve.a,{disabled:c,variant:s?"secondary":"primary",onClick:function(){return i(s?"":n)},children:r})},qt=function(e,t,n){var r=e;r.questions=n,t(r)},Et=function(e){var t=e.question;return console.log(t),Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:t.title}),Object(m.jsx)("h2",{style:{fontStyle:"italic"},children:t.input_type}),t.options.map((function(e){return Object(m.jsx)("li",{children:e})}))]})},At=function(e){var t=e.questions;return Object(m.jsx)(ht.a,{children:t.map((function(e){return Object(m.jsx)(Ot.a,{children:Object(m.jsx)(Et,{question:e})},e._id)}))})},Dt=[{title:"Add Questions",mod:"add-q"},{title:"Remove Questions",mod:"rem-q"},{title:"View Questions",mod:"view-q"}],It=function(e){var t=e.inSet,n=e.index,r=e.onDeleteSet,i=e.onDuplicateSet,c=e.onMusicSwitch,a=e.onEditTitle,o=e.allQuestions,u=Object(s.useState)(t),d=Object(l.a)(u,2),j=d[0],b=d[1],f=Object(s.useState)(!1),h=Object(l.a)(f,2),p=h[0],O=h[1],x=Object(s.useState)(""),v=Object(l.a)(x,2),g=v[0],y=v[1],w=j.title,S=j.music,k=j._id,N=j.questions?j.questions.length:0;return Object(m.jsxs)(ht.a,{children:[Object(m.jsxs)(Ot.a,{children:[Object(m.jsxs)(mt.a,{children:[p?Object(m.jsx)(wt,{old:w,onEditTitle:a,setEditingTitle:O,id:k,index:n}):w,Object(m.jsx)(Ve.a,{onClick:function(){return O(!p)},style:{display:p?"none":""},children:"Edit Name"})]}),Object(m.jsx)(mt.a,{children:Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{htmlFor:"hasMusic",children:Object(m.jsx)(xt,{src:gt,width:"2rem"})}),Object(m.jsx)("input",{type:"checkbox",value:"",id:"hasMusic",defaultChecked:S,onChange:function(){return c(k,!S,n)}})]})}),Object(m.jsxs)(mt.a,{children:[Object(m.jsxs)(Ot.a,{children:["No. Questions in Set: ",N]}),Dt.map((function(e){return Object(m.jsx)(Ot.a,{children:Object(m.jsx)(Ct,{setMod:y,buttonMod:e.mod,currentMod:g,disabled:"add-q"!==e.mod&&0===N||"add-q"===e.mod&&N>=o.length,children:e.title})},e.mod)}))]}),Object(m.jsxs)(mt.a,{children:[Object(m.jsx)(Ot.a,{children:"Duplicate Set"}),Object(m.jsx)(Ot.a,{children:Object(m.jsx)(Ve.a,{onClick:function(){i(j)},children:Object(m.jsx)(xt,{src:yt,width:"2rem"})})}),Object(m.jsx)(Ot.a,{children:"Delete Set"}),Object(m.jsx)(Ot.a,{children:Object(m.jsx)(Ve.a,{onClick:function(){r(k)},children:Object(m.jsx)(xt,{src:vt,width:"2rem"})})})]})]}),Object(m.jsxs)(Ot.a,{children:["add-q"===g&&Object(m.jsx)(kt,{setCurrentQuestions:function(e){qt(j,b,e),y("")},currentQuestions:j.questions,allQuestions:o,id:j._id}),"rem-q"===g&&Object(m.jsx)(Nt,{setCurrentQuestions:function(e){qt(j,b,e),y("")},currentQuestions:j.questions,allQuestions:o,id:j._id}),"view-q"===g&&Object(m.jsx)(At,{questions:o.filter((function(e){return j.questions.includes(e._id)}))})]})]})},Pt=n(40),Qt=n(49);n(139);function _t(e){var t=e.provided,n=e.style,r=e.isDragging,i=Object(j.a)(Object(j.a)({},n),t.draggableProps.style);return Object(j.a)(Object(j.a)({},i),{},{height:r?i.height:i.height-8,marginBottom:8})}function Rt(e){var t=e.provided,n=e.item,r=e.style,i=e.isDragging;return Object(m.jsx)("div",Object(j.a)(Object(j.a)(Object(j.a)({},t.draggableProps),t.dragHandleProps),{},{ref:t.innerRef,style:_t({provided:t,style:r,isDragging:i}),className:"item ".concat(i?"is-dragging":""),children:n.title}))}var Tt=a.a.memo((function(e){var t=e.data,n=e.index,r=e.style,i=t[n];return Object(m.jsx)(Pt.b,{draggableId:i._id,index:n,children:function(e){return Object(m.jsx)(Rt,{provided:e,item:i,style:r})}},i._id)}),Qt.b),Ft=function(e){var t=e.curquestions,n=e.onChangeOrder,r=Object(s.useState)(t),i=Object(l.a)(r,2),c=i[0],a=i[1];var o=function(e){if(e.destination&&e.source.index!==e.destination.index){var t=function(e,t){var n=c.map((function(e){return e})),r=n.splice(e,1),i=Object(l.a)(r,1)[0];return n.splice(t,0,i),n}(e.source.index,e.destination.index);a(t)}};return Object(m.jsxs)("div",{children:[Object(m.jsx)(Pt.a,{onDragEnd:function(e){return o(e)},children:Object(m.jsx)("div",{className:"dnd",children:Object(m.jsx)(Pt.c,{droppableId:"droppable",mode:"virtual",renderClone:function(e,t,n){return Object(m.jsx)(Rt,{provided:e,isDragging:t.isDragging,item:c[n.source.index]})},children:function(e){return Object(m.jsx)(Qt.a,{height:80*c.length,itemCount:c.length,itemSize:80,width:300,outerRef:e.innerRef,itemData:c,children:Tt})}})})}),Object(m.jsx)(Ve.a,{onClick:function(){return n(c)},children:"Done"})]})},Mt=function(e){var t=e.onAddSet,n=Object(s.useState)("Name cannot be empty."),r=Object(l.a)(n,2),i=r[0],c=r[1],a=Object(s.useState)({title:null,music:!0}),o=Object(l.a)(a,2),u=o[0],d=o[1];return Object(m.jsxs)(ht.a,{children:[Object(m.jsxs)(Ot.a,{children:[Object(m.jsx)("label",{htmlFor:"set-name",children:"Set Name:"}),Object(m.jsx)("input",{onChange:function(e){return function(e,t,n,r){""===t?n("Name cannot be empty."):(n("Good to go!"),r({title:t,music:e.music}))}(u,e.target.value,c,d)}}),Object(m.jsx)(ze.a,{variant:"Good to go!"===i?"success":"danger",children:i})]}),Object(m.jsxs)(Ot.a,{children:[Object(m.jsx)("label",{htmlFor:"set-music",children:"Has Music:"}),Object(m.jsx)("input",{onChange:function(e){d({title:u.title,music:!u.music})},type:"checkbox",className:"align-self-center",defaultChecked:!0})]}),Object(m.jsx)(Ot.a,{children:Object(m.jsx)(Ve.a,{disabled:"Good to go!"!==i,onClick:function(){return t(u.title,u.music)},children:"Create"})})]})},Lt=function(e){var t=e.onNewQuestion,n=Object(s.useState)(""),r=Object(l.a)(n,2),i=r[0],c=r[1],a=Object(s.useState)(""),o=Object(l.a)(a,2),u=o[0],d=o[1],j=Object(s.useState)(""),b=Object(l.a)(j,2),f=b[0],h=b[1];return Object(m.jsxs)("form",{className:"new-question-form",onSubmit:function(e){e.preventDefault(),i?u?"multiple-choice"===u&&!f||"check-box"===u&&!f?alert("Please add options for multiple choice and checkbox questions"):t(i,u,f):alert("Please select a question type"):alert("Please add a title")},children:[Object(m.jsx)("label",{children:Object(m.jsx)("b",{children:"Enter Question: "})}),Object(m.jsx)("input",{type:"text",placeholder:"Ask Here...",value:i,onChange:function(e){return c(e.target.value)}}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{children:Object(m.jsx)("b",{children:"Question Type: "})}),Object(m.jsxs)("div",{onChange:function(e){return d(e.target.value)},children:[Object(m.jsx)("input",{type:"radio",value:"multiple-choice",name:"option"})," Multiple Choice",Object(m.jsx)("input",{type:"radio",value:"check-box",name:"option"})," Checkbox",Object(m.jsx)("input",{type:"radio",value:"short-answer",name:"option"})," Short Answer",Object(m.jsx)("input",{type:"radio",value:"color",name:"option"})," Color",Object(m.jsx)("input",{type:"radio",value:"slider",name:"option"})," Slider"]}),("multiple-choice"===u||"check-box"===u)&&Object(m.jsx)("label",{children:"Options (please separate each option with a semicolon)"}),("multiple-choice"===u||"check-box"===u)&&Object(m.jsx)("input",{type:"text",placeholder:"options",value:f,onChange:function(e){return h(e.target.value)}}),Object(m.jsx)("input",{className:"submit btn btn-primary",type:"submit",value:"Create New Question"})]})},Wt=function(e){var t=e.allQuestions,n=e.setAllQuestions,r=e.sets,i=e.setSets,c=e.onDeleteQuestion,a=r,o=Object(s.useState)([]),u=Object(l.a)(o,2),d=u[0],j=u[1],b=function(){var e=Object(se.a)(ce.a.mark((function e(r){var s,o,l,u;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),!window.confirm("Delete these questions?")){e.next=13;break}for(n(t.filter((function(e){return!d.includes(e._id)}))),c(),s=0;s<d.length;s++)for(o=0;o<a.length;o++)for(l=0;l<a[o].questions.length;l++)a[o].questions[l]===d[s]&&(a[o].questions.splice(l,1),Ee.putOne("sets",a[o]._id,a[o]));i(a),u=0;case 7:if(!(u<d.length)){e.next=13;break}return e.next=10,Ee.deleteOne("questions",d[u]);case 10:u++,e.next=7;break;case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("form",{onSubmit:b,children:[t.map((function(e){return Object(m.jsxs)("div",{onChange:function(e){!function(e){for(var t=[],n=0;n<d.length;n++)t.push(d[n]);for(var r=0;r<t.length;r++)if(e===d[r])return t.splice(r,1),void j(t);t.push(e),j(t)}(e.target.value)},children:[Object(m.jsx)("input",{type:"checkbox",value:e._id,name:"question"}),e.title]},e.title)})),Object(m.jsx)("input",{className:"submit btn btn-primary",type:"submit",value:"Delete Selected Questions"})]})},Bt=function(e){var t=e.type,n=e.sets,r=e.setSets,i=e.allQuestions,c=e.setAllQuestions,s=e.setBigMod,a=e.onChangeOrder,o=e.onAddSet,l=e.onNewQuestion,u=function(e){return function(){s(""),e&&e.apply(void 0,arguments)}};switch(t){default:return null;case"new-set":return Object(m.jsx)(Mt,{onAddSet:u(o)});case"new-q":return Object(m.jsx)(Lt,{onNewQuestion:u(l)});case"reorder":return Object(m.jsx)(Ft,{curquestions:n,onChangeOrder:u(a)});case"delete-q":return Object(m.jsx)(Wt,{allQuestions:i,setAllQuestions:c,sets:n,setSets:r,onDeleteQuestion:u()})}},Ht=n.p+"static/media/plus.1e30cd23.svg",Gt=[{title:"Create a New Set",mod:"new-set",icon:Ht},{title:"Reorder Sets",mod:"reorder",icon:n.p+"static/media/list-ol.5eab81d5.svg"},{title:"Create a New Question",mod:"new-q",icon:Ht},{title:"Delete a Question",mod:"delete-q",icon:vt}],Kt=function(e){var t=e.bigMod,n=e.setBigMod;return Object(m.jsx)(ht.a,{children:Object(m.jsx)(Ot.a,{children:Gt.map((function(e){return Object(m.jsxs)(mt.a,{children:[Object(m.jsx)(Ot.a,{children:e.title}),Object(m.jsx)(Ot.a,{children:Object(m.jsx)(Ct,{buttonMod:e.mod,currentMod:t,setMod:n,children:Object(m.jsx)(xt,{src:e.icon})})})]},e.mod)}))})})},Ut=function(e){var t=e.sets,n=e.setSets,r=e.allQuestions,i=e.setAllQuestions,c=e.onDelete,a=e.onDuplicate,o=e.onAddSet,u=e.onNewQuestion,d=e.onChangeOrder,j=e.onMusicSwitch,b=e.onEditTitle,f=Object(s.useState)(""),h=Object(l.a)(f,2),p=h[0],O=h[1];return Object(m.jsx)(ht.a,{children:Object(m.jsxs)(pt.a,{children:[Object(m.jsxs)(pt.a.Item,{children:[Object(m.jsx)("h1",{children:"Survey Modification Menus"}),Object(m.jsx)(Kt,{bigMod:p,setBigMod:O})]}),Object(m.jsx)(pt.a.Item,{children:Object(m.jsx)(Bt,{type:p,sets:t,setSets:n,setBigMod:O,onChangeOrder:d,onAddSet:o,onNewQuestion:u,allQuestions:r,setAllQuestions:i})}),Object(m.jsxs)(pt.a.Item,{children:[Object(m.jsx)("h1",{children:"Survey Sets"}),Object(m.jsxs)(Ot.a,{children:[Object(m.jsx)(mt.a,{children:"Set Name"}),Object(m.jsx)(mt.a,{children:"Has Music?"}),Object(m.jsx)(mt.a,{children:"Edit Questions"}),Object(m.jsx)(mt.a,{children:"Duplicate or Delete Set"})]})]}),t.map((function(e,t){return Object(m.jsx)(ht.a,{children:Object(m.jsx)(pt.a.Item,{children:Object(m.jsx)(It,{inSet:e,index:t,onDeleteSet:c,onDuplicateSet:a,onMusicSwitch:j,onEditTitle:b,onAddQuestions:u,allQuestions:r})},e._id)},e._id)}))]})})};n(141);var Vt=function(){var e=Object(s.useState)([]),t=Object(l.a)(e,2),n=t[0],r=t[1],i=Object(s.useState)([]),a=Object(l.a)(i,2),o=a[0],d=a[1],j=Object(s.useState)([]),b=Object(l.a)(j,2),f=b[0],h=b[1];Object(s.useEffect)((function(){var e=function(){var e=Object(se.a)(ce.a.mark((function e(){var t,n,i,c,s,a,o,l,u;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee.getAll("sets");case 2:return t=e.sent,e.next=5,Ee.getAll("set-order");case 5:if(0!==(n=e.sent).length){e.next=17;break}for(i=[],c=0;c<t.length;c++)i.push(t[c]._id);return s={sets:i},e.next=12,Ee.post("set-order",s);case 12:a=e.sent,r(a),d(t),e.next=33;break;case 17:r(n[0].sets),o=[],l=0;case 20:if(!(l<n[0].sets.length)){e.next=32;break}u=0;case 22:if(!(u<t.length)){e.next=29;break}if(n[0].sets[l]!==t[u]._id){e.next=26;break}return o.push(t[u]),e.abrupt("break",29);case 26:u++,e.next=22;break;case 29:l++,e.next=20;break;case 32:d(o);case 33:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(se.a)(ce.a.mark((function e(){var t;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee.getAll("questions");case 2:t=e.sent,h(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),t()}),[]);var p=function(){var e=Object(se.a)(ce.a.mark((function e(t){var i,c,s;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==window.confirm("Delete this set?")){e.next=10;break}return Ee.deleteOne("sets",t),d(o.filter((function(e){return e._id!==t}))),i=n.filter((function(e){return e!==t})),c={sets:i},e.next=8,Ee.patch("set-order",c);case 8:s=e.sent,r(s.sets);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(se.a)(ce.a.mark((function e(t){return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(t.title,t.music,t.questions);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(se.a)(ce.a.mark((function e(t,i){var c,s,a,l,j,b,f=arguments;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=f.length>2&&void 0!==f[2]?f[2]:[],s={title:t,questions:c,music:i},e.next=4,Ee.post("sets",s);case 4:return a=e.sent,d([].concat(Object(u.a)(o),[a])),(l=n).push(a._id),j={sets:l},e.next=11,Ee.patch("set-order",j);case 11:b=e.sent,r(b.sets);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=Object(se.a)(ce.a.mark((function e(t,n,r){var i,c,s;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={title:t,input_type:n},""!==r&&(c=g(r),i.options=c),e.next=4,Ee.post("questions",i);case 4:s=e.sent,h([].concat(Object(u.a)(f),[s]));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function g(e){var t=[];if(!e)return null;for(var n=0,r=0;r<e.length;r++){if(";"===e.charAt(r)){var i=e.substring(n,r).trim();t.push(i),n=r+1}}var c=e.substring(n,e.length).trim();return""!==c&&t.push(c),t}var y=function(){var e=Object(se.a)(ce.a.mark((function e(t){var n,i,c,s,a;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={sets:t},e.next=3,Ee.patch("set-order",n);case 3:i=e.sent,r(i.sets),c=[],s=0;case 7:if(!(s<i.sets.length)){e.next=19;break}a=0;case 9:if(!(a<t.length)){e.next=16;break}if(i.sets[s]!==t[a]._id){e.next=13;break}return c.push(t[a]),e.abrupt("break",16);case 13:a++,e.next=9;break;case 16:s++,e.next=7;break;case 19:d(c);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(se.a)(ce.a.mark((function e(t,n,r){var i;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ee.patchOne("sets",t,{music:n}),(i=o)[r].music=n,d(i);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),S=function(){var e=Object(se.a)(ce.a.mark((function e(t,n,r){var i;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ee.patchOne("sets",t,{title:n}),(i=o)[r].title=n,d(i);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:"outer-div admin-container",children:[Object(m.jsx)(c.b,{to:"/admin",children:Object(m.jsx)(Ve.a,{children:"Return to Admin Home"})}),Object(m.jsx)(Ut,{sets:o,setSets:d,allQuestions:f,setAllQuestions:h,onDelete:p,onDuplicate:O,onAddSet:x,onNewQuestion:v,onChangeOrder:y,onMusicSwitch:w,onEditTitle:S})]})},zt=function(e,t){var n="";if(1===t.length)n=e[t];else for(var r=[].concat(Object(u.a)(e),["None of the Above"]),i=0;i<t.length;i++)"1"===t[i]&&(n+="".concat(r[i],";"));return n},Yt=n(71),Jt=(0,n(142).createObjectCsvStringifier)({header:[{id:"userId",title:"User (ID)"},{id:"pieceInfo",title:"Piece Info"},{id:"questionTitle",title:"Question"},{id:"answer",title:"Answer"}]}),Zt=function(e){var t=Jt.getHeaderString()+Jt.stringifyRecords(e),n=new Blob([t]);Object(Yt.saveAs)(n,"data.csv")},$t=function(e,t){var n=0,r=0;for(t[n]&&(r=t[n]);e>=r;)r+=t[n],n+=1;return console.log(e,n),n},Xt=function(){var e=Object(se.a)(ce.a.mark((function e(){var t,n,r,i,c,s;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee.getAll("responses");case 2:return t=e.sent,e.next=5,Ee.getAll("questions");case 5:return n=e.sent,e.next=8,Ee.getAll("music");case 8:if(r=e.sent,t.length&&n.length){for(i=[],c=function(e){for(var c=t[e],s=c._id,a=function(e){var t=r.find((function(t){return null!==t&&t._id===c.musicids[$t(e,c.questionGroups)]})),a=n.find((function(t){return null!==t&&t._id===c.questions[e]})),o="";if(!a)return"continue";o=0===a.options.length?c.answers[e]:zt(a.options,c.answers[e]);for(var l=0;l<a.options;l++);i.push({userId:s,pieceInfo:t?JSON.stringify(t):"No Music",questionTitle:a.title,answer:o})},o=0;o<c.questions.length;o++)a(o)},s=0;s<t.length;s++)c(s);Zt(i)}case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),en=function(){return Object(m.jsxs)("div",{className:"admin-container",children:[Object(m.jsx)(c.b,{to:"/admin",children:Object(m.jsx)(Ve.a,{children:"Return to Admin Home"})}),Object(m.jsx)(Ve.a,{onClick:Xt,children:"Download Data (CSV)"})]})},tn=function(){return Object(m.jsxs)(ht.a,{children:[Object(m.jsx)("h1",{className:"h1",children:"Admin Home Page"}),Object(m.jsx)(c.b,{to:"/admin/modifysurvey",children:Object(m.jsx)(Ve.a,{children:"Modify Survey"})}),Object(m.jsx)(c.b,{to:"/admin/uploadmusic",children:Object(m.jsx)(Ve.a,{children:"Upload Music"})}),Object(m.jsx)(c.b,{to:"/admin/downloaddata",children:Object(m.jsx)(Ve.a,{children:"Download Data"})}),Object(m.jsx)(c.b,{to:"/admin/viewmusic",children:Object(m.jsx)(Ve.a,{children:"View/Delete Music"})})]})};var nn=function(){return B(),H(),Object(m.jsx)(s.Fragment,{children:Object(m.jsxs)(o.d,{children:[Object(m.jsx)(o.b,{path:"/survey",component:Me}),Object(m.jsx)(o.b,{path:"/home",component:Ge}),Object(m.jsx)($e,{path:"/admin/modifysurvey",component:Vt}),Object(m.jsx)($e,{path:"/admin/uploadmusic",component:bt}),Object(m.jsx)($e,{path:"/admin/viewmusic",component:ft}),Object(m.jsx)($e,{path:"/admin/downloaddata",component:en}),Object(m.jsx)($e,{path:"/admin",component:tn}),Object(m.jsx)(o.b,{path:"/not-found",component:Ke}),Object(m.jsx)(o.a,{from:"/",exact:!0,to:"/home"}),Object(m.jsx)(o.a,{to:"/not-found"})]})})},rn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,157)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),i(e),c(e),s(e)}))};Ee.postToken(),i.a.render(Object(m.jsx)(c.a,{children:Object(m.jsx)(nn,{})}),document.getElementById("root")),rn()},74:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},82:function(e,t,n){}},[[153,1,2]]]);
//# sourceMappingURL=main.d1e1477d.chunk.js.map